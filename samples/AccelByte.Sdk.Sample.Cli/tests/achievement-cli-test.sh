#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 
# - template file: 

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..28"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 AdminListAchievements
$CLI_EXE \
    --sn achievement \
    --op AdminListAchievements \
    --namespace $AB_NAMESPACE \
    --global 'false' \
    --limit '77' \
    --offset '24' \
    --sortBy 'updatedAt' \
    --tags '["pZoXFRbt", "9ShqnFGa", "WWBXqibS"]' \
    > test.out 2>&1
eval_tap $? 2 'AdminListAchievements' test.out

#- 3 AdminCreateNewAchievement
# body param: body
echo '{"achievementCode": "eht5ZYzm", "customAttributes": {"nWPv1S80": {}, "p10GINaJ": {}, "c4KvaPET": {}}, "defaultLanguage": "XwTUfU6N", "description": {"YdOsNz6R": "Wv6SHpwL", "HPjQ3U3y": "thFz1PtT", "POlTBflp": "VL4JoEBD"}, "global": true, "goalValue": 0.73360206534269, "hidden": false, "incremental": false, "lockedIcons": [{"slug": "E0I3hnTA", "url": "ylh6Lw2f"}, {"slug": "kPFRMnpo", "url": "wO7hyN5G"}, {"slug": "2Li1IDMt", "url": "e7MgBny6"}], "name": {"4qbhO8vi": "Lwa4WQHh", "6MJDZ1w3": "L8ngFOiv", "1iouR0ZB": "lwjsbx2c"}, "statCode": "DpEvvInw", "tags": ["hU91dh7a", "IcweeUsJ", "uaKMacJ4"], "unlockedIcons": [{"slug": "8aQUNR6a", "url": "57rSdp1s"}, {"slug": "WKHczHBK", "url": "ssQrBg0W"}, {"slug": "9jRsroHY", "url": "Yp5PADjX"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op AdminCreateNewAchievement \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'AdminCreateNewAchievement' test.out

#- 4 ExportAchievements
$CLI_EXE \
    --sn achievement \
    --op ExportAchievements \
    --namespace $AB_NAMESPACE \
    --tags '["W1NGMLuk", "BrFXvYRP", "KC5zzx55"]' \
    > test.out 2>&1
eval_tap $? 4 'ExportAchievements' test.out

#- 5 ImportAchievements
# form data upload: file
echo 'tmp.dat' > $TEMP_FILE_UPLOAD
$CLI_EXE \
    --sn achievement \
    --op ImportAchievements \
    --namespace $AB_NAMESPACE \
    --upload file $TEMP_FILE_UPLOAD \
    --strategy 'AuG4Qyq0' \
    > test.out 2>&1
eval_tap $? 5 'ImportAchievements' test.out

#- 6 AdminGetAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminGetAchievement \
    --achievementCode 'eKA2uIVQ' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'AdminGetAchievement' test.out

#- 7 AdminUpdateAchievement
# body param: body
echo '{"customAttributes": {"CJldwQuS": {}, "9WN6wHyy": {}, "7kf6dDxj": {}}, "defaultLanguage": "TInZqOmY", "description": {"kcbzgVmH": "0BgT4TKJ", "uoLNNpOK": "fAarI2hE", "d3kxFmzZ": "Vw3CH94F"}, "global": true, "goalValue": 0.0703097903083657, "hidden": false, "incremental": false, "lockedIcons": [{"slug": "mqYsdI2u", "url": "x2Y5z49r"}, {"slug": "1EJwzE8D", "url": "mhL7TLYA"}, {"slug": "avnkUkqv", "url": "BFD823x5"}], "name": {"nReVJyR6": "kaMlIZt0", "R753jdQG": "70MaruBo", "ivOHZGw2": "J7vvLFs1"}, "statCode": "5NkbgrKE", "tags": ["VDxOnLpI", "oWD4ssP2", "Ra8hco1L"], "unlockedIcons": [{"slug": "VpGgT8pi", "url": "medlNngr"}, {"slug": "j88TxDzK", "url": "A2YoxgbD"}, {"slug": "BOS5LzBI", "url": "Bk87RDo3"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op AdminUpdateAchievement \
    --achievementCode '1xDTkTqI' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'AdminUpdateAchievement' test.out

#- 8 AdminDeleteAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminDeleteAchievement \
    --achievementCode 'pTisyxzA' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 8 'AdminDeleteAchievement' test.out

#- 9 AdminUpdateAchievementListOrder
# body param: body
echo '{"targetOrder": 30}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op AdminUpdateAchievementListOrder \
    --achievementCode '3RNOcICD' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'AdminUpdateAchievementListOrder' test.out

#- 10 AdminListGlobalAchievements
$CLI_EXE \
    --sn achievement \
    --op AdminListGlobalAchievements \
    --namespace $AB_NAMESPACE \
    --achievementCodes 'RKxTTl3x' \
    --limit '17' \
    --offset '21' \
    --sortBy 'BXXIxnEf' \
    --status 'Azzuqmn7' \
    --tags '["aGqhDRmB", "qAkw00Jq", "Im5BdT1H"]' \
    > test.out 2>&1
eval_tap $? 10 'AdminListGlobalAchievements' test.out

#- 11 AdminListGlobalAchievementContributors
$CLI_EXE \
    --sn achievement \
    --op AdminListGlobalAchievementContributors \
    --achievementCode 'osXeqToq' \
    --namespace $AB_NAMESPACE \
    --limit '57' \
    --offset '89' \
    --sortBy 'wa8amXpl' \
    > test.out 2>&1
eval_tap $? 11 'AdminListGlobalAchievementContributors' test.out

#- 12 ResetGlobalAchievement
$CLI_EXE \
    --sn achievement \
    --op ResetGlobalAchievement \
    --achievementCode 'TOoz8WIA' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 12 'ResetGlobalAchievement' test.out

#- 13 BulkCreatePSNEvent
# body param: body
echo '{"data": [{"events": [{"dateTime": "gf6IgX2O", "eventData": {"eventName": "znk9IzSy", "properties": {"M82aAWhj": {}, "8aUO4dJi": {}, "PSR8rBwH": {}}}, "eventId": "UCeihpX6", "version": "n39DUmN1"}, {"dateTime": "lKIV51RR", "eventData": {"eventName": "4kjhhdGo", "properties": {"p2soxZOM": {}, "Ak00qX1J": {}, "cNdiZTss": {}}}, "eventId": "6sTAwJSZ", "version": "ujgrnMfq"}, {"dateTime": "kaIKOvbE", "eventData": {"eventName": "RABcJRrw", "properties": {"rO1QhJdG": {}, "l45pyJei": {}, "mUIBcWw2": {}}}, "eventId": "pAnAoniD", "version": "SoqVg1mq"}], "thirdPartyUserId": "X5lbMi9M", "userId": "W4y2cUAG"}, {"events": [{"dateTime": "a8NtLLei", "eventData": {"eventName": "WEK9Ofbj", "properties": {"3iFsjFZq": {}, "nGiMgNgP": {}, "n0j5xbpU": {}}}, "eventId": "78fLyvN3", "version": "8dP3Q0cG"}, {"dateTime": "aY2hSFQp", "eventData": {"eventName": "XN2zIDs5", "properties": {"1B3HVPT4": {}, "gY5FpcOp": {}, "b63xy1bn": {}}}, "eventId": "UZ3eP9QU", "version": "nwHkRWX4"}, {"dateTime": "hEwe6a10", "eventData": {"eventName": "x5n0aeop", "properties": {"mFYrN0Ew": {}, "i34RyUlv": {}, "PDPZFKw9": {}}}, "eventId": "qFuWd3db", "version": "XbOXzP7s"}], "thirdPartyUserId": "KJk7KvFJ", "userId": "zp4GCmwU"}, {"events": [{"dateTime": "Cd30D1D9", "eventData": {"eventName": "j9MtkQRw", "properties": {"1pXs5om2": {}, "rdRYnoOC": {}, "qS8agyin": {}}}, "eventId": "5kENGrQR", "version": "rBd6hooz"}, {"dateTime": "7Mxwyfxl", "eventData": {"eventName": "GDsdtHQb", "properties": {"CidskNHh": {}, "g8RkdSNO": {}, "X6zsbXpY": {}}}, "eventId": "0wyEpmFt", "version": "uGLrtM2z"}, {"dateTime": "TjzcNs2L", "eventData": {"eventName": "Yjz842IY", "properties": {"4muIJ44q": {}, "qeDg4GHV": {}, "SLqts7nN": {}}}, "eventId": "IQPjmwZ8", "version": "4TVOKp5j"}], "thirdPartyUserId": "0dgqxNVy", "userId": "DGnErwHI"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op BulkCreatePSNEvent \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'BulkCreatePSNEvent' test.out

#- 14 AdminListTags
$CLI_EXE \
    --sn achievement \
    --op AdminListTags \
    --namespace $AB_NAMESPACE \
    --limit '82' \
    --name 'aRrNF1sd' \
    --offset '51' \
    --sortBy 'MoTLrad3' \
    > test.out 2>&1
eval_tap $? 14 'AdminListTags' test.out

#- 15 AdminListUserAchievements
$CLI_EXE \
    --sn achievement \
    --op AdminListUserAchievements \
    --namespace $AB_NAMESPACE \
    --userId 'ksdvBg2S' \
    --limit '71' \
    --offset '71' \
    --preferUnlocked 'false' \
    --sortBy 'P9KsEp6X' \
    --tags '["5ghT1AUT", "PAGDKiQE", "xWPdT6qh"]' \
    > test.out 2>&1
eval_tap $? 15 'AdminListUserAchievements' test.out

#- 16 AdminResetAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminResetAchievement \
    --achievementCode 'MBKuSPj5' \
    --namespace $AB_NAMESPACE \
    --userId 'TVUMOWrL' \
    > test.out 2>&1
eval_tap $? 16 'AdminResetAchievement' test.out

#- 17 AdminUnlockAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminUnlockAchievement \
    --achievementCode 'e4svEPza' \
    --namespace $AB_NAMESPACE \
    --userId 'fkV8b7nF' \
    > test.out 2>&1
eval_tap $? 17 'AdminUnlockAchievement' test.out

#- 18 AdminAnonymizeUserAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminAnonymizeUserAchievement \
    --namespace $AB_NAMESPACE \
    --userId 'xZ4mmXHd' \
    > test.out 2>&1
eval_tap $? 18 'AdminAnonymizeUserAchievement' test.out

#- 19 AdminListUserContributions
$CLI_EXE \
    --sn achievement \
    --op AdminListUserContributions \
    --namespace $AB_NAMESPACE \
    --userId '3Eczy5TX' \
    --achievementCodes 'N5MqpLIA' \
    --limit '15' \
    --offset '90' \
    --sortBy '4omz6j6D' \
    --tags '["h70DCgnE", "g62pdkGW", "pS6VaaDF"]' \
    > test.out 2>&1
eval_tap $? 19 'AdminListUserContributions' test.out

#- 20 PublicListAchievements
$CLI_EXE \
    --sn achievement \
    --op PublicListAchievements \
    --namespace $AB_NAMESPACE \
    --global 'true' \
    --limit '52' \
    --offset '66' \
    --sortBy 'createdAt:asc' \
    --tags '["P7JGfGln", "DNLYScHp", "M9JSwyFw"]' \
    --language 'xqAowWnf' \
    > test.out 2>&1
eval_tap $? 20 'PublicListAchievements' test.out

#- 21 PublicGetAchievement
$CLI_EXE \
    --sn achievement \
    --op PublicGetAchievement \
    --achievementCode 'rS2APzdT' \
    --namespace $AB_NAMESPACE \
    --language 'x7ZO5KkF' \
    > test.out 2>&1
eval_tap $? 21 'PublicGetAchievement' test.out

#- 22 PublicListGlobalAchievements
$CLI_EXE \
    --sn achievement \
    --op PublicListGlobalAchievements \
    --namespace $AB_NAMESPACE \
    --achievementCodes 'SGSSwWTL' \
    --limit '66' \
    --offset '65' \
    --sortBy 'LYb7ywFa' \
    --status 'MTJQn0Ua' \
    --tags '["jE5667YU", "vHcS0UDT", "5cQIf2TS"]' \
    > test.out 2>&1
eval_tap $? 22 'PublicListGlobalAchievements' test.out

#- 23 ListGlobalAchievementContributors
$CLI_EXE \
    --sn achievement \
    --op ListGlobalAchievementContributors \
    --achievementCode '3YvZjj2i' \
    --namespace $AB_NAMESPACE \
    --limit '91' \
    --offset '53' \
    --sortBy 'uRMl3RUw' \
    > test.out 2>&1
eval_tap $? 23 'ListGlobalAchievementContributors' test.out

#- 24 PublicListTags
$CLI_EXE \
    --sn achievement \
    --op PublicListTags \
    --namespace $AB_NAMESPACE \
    --limit '15' \
    --name 'PfId5VfP' \
    --offset '79' \
    --sortBy 'HywEkY4y' \
    > test.out 2>&1
eval_tap $? 24 'PublicListTags' test.out

#- 25 PublicListUserAchievements
$CLI_EXE \
    --sn achievement \
    --op PublicListUserAchievements \
    --namespace $AB_NAMESPACE \
    --userId 'JNo586Hd' \
    --limit '93' \
    --offset '30' \
    --preferUnlocked 'true' \
    --sortBy 'Aht4AXbc' \
    --tags '["ZxFsshgq", "WkdZZEyS", "jKSXIa9J"]' \
    > test.out 2>&1
eval_tap $? 25 'PublicListUserAchievements' test.out

#- 26 PublicUnlockAchievement
$CLI_EXE \
    --sn achievement \
    --op PublicUnlockAchievement \
    --achievementCode 'QFV2sR18' \
    --namespace $AB_NAMESPACE \
    --userId 'Qdihv6bs' \
    > test.out 2>&1
eval_tap $? 26 'PublicUnlockAchievement' test.out

#- 27 ListUserContributions
$CLI_EXE \
    --sn achievement \
    --op ListUserContributions \
    --namespace $AB_NAMESPACE \
    --userId 'kNkDg213' \
    --achievementCodes '5WECXGnj' \
    --limit '43' \
    --offset '41' \
    --sortBy 'e9xjBB0W' \
    --tags '["7kQv71s3", "bIPvSpGS", "ozs9ydK2"]' \
    > test.out 2>&1
eval_tap $? 27 'ListUserContributions' test.out

#- 28 ClaimGlobalAchievementReward
$CLI_EXE \
    --sn achievement \
    --op ClaimGlobalAchievementReward \
    --achievementCode 'iGEnl1Ty' \
    --namespace $AB_NAMESPACE \
    --userId '4vqeB9pe' \
    > test.out 2>&1
eval_tap $? 28 'ClaimGlobalAchievementReward' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE