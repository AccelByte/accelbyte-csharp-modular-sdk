#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 
# - template file: 

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..30"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 AdminListAchievements
$CLI_EXE \
    --sn achievement \
    --op AdminListAchievements \
    --namespace $AB_NAMESPACE \
    --global 'true' \
    --limit '17' \
    --offset '99' \
    --sortBy 'updatedAt:desc' \
    --tags '["2DptW3lT", "43S79vxD", "g2GmAW6Q"]' \
    > test.out 2>&1
eval_tap $? 2 'AdminListAchievements' test.out

#- 3 AdminCreateNewAchievement
# body param: body
echo '{"achievementCode": "AT7CQFdQ", "customAttributes": {"RTYDVjmX": {}, "fzQ2shkc": {}, "mXPkYJsi": {}}, "defaultLanguage": "w9BEAowj", "description": {"rthKW91w": "Msdcpyaf", "fEuwWmgk": "6BpPZk39", "mTJ2awxF": "0mhZbvfq"}, "global": false, "goalValue": 0.4385316816819296, "hidden": true, "incremental": false, "lockedIcons": [{"slug": "UjtnZAdE", "url": "AWHro4ls"}, {"slug": "w2RORBzz", "url": "FJzkQK5u"}, {"slug": "Vo1yOD9g", "url": "ZUQPvEZs"}], "name": {"4FLJoo5v": "sOG5l2eO", "NH1fsI61": "xhQoSqXX", "tqAolocp": "MhsGdKaB"}, "statCode": "oKM3OIWy", "tags": ["tjNTG5ya", "fWXbCRTn", "iSuyE0Xm"], "unlockedIcons": [{"slug": "RoaZ0J3p", "url": "tOCBxK18"}, {"slug": "fLC3m8Al", "url": "cO0ipPr3"}, {"slug": "LTPhXCuo", "url": "EJXSmKY4"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op AdminCreateNewAchievement \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'AdminCreateNewAchievement' test.out

#- 4 ExportAchievements
$CLI_EXE \
    --sn achievement \
    --op ExportAchievements \
    --namespace $AB_NAMESPACE \
    --tags '["azGYwcQM", "H2ds0L6B", "opWwHCJX"]' \
    > test.out 2>&1
eval_tap $? 4 'ExportAchievements' test.out

#- 5 ImportAchievements
# form data upload: file
echo 'tmp.dat' > $TEMP_FILE_UPLOAD
$CLI_EXE \
    --sn achievement \
    --op ImportAchievements \
    --namespace $AB_NAMESPACE \
    --upload file $TEMP_FILE_UPLOAD \
    --strategy 'LPQnlJoz' \
    > test.out 2>&1
eval_tap $? 5 'ImportAchievements' test.out

#- 6 AdminGetAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminGetAchievement \
    --achievementCode 'IaMTlEWs' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'AdminGetAchievement' test.out

#- 7 AdminUpdateAchievement
# body param: body
echo '{"customAttributes": {"hMdWDLaG": {}, "lG2hkpf8": {}, "n2afiK7T": {}}, "defaultLanguage": "m75OP7zX", "description": {"eh3yw8TQ": "emoYfNqj", "W11T73CM": "5rJ4QWJn", "DU0HtYku": "FXcIHn31"}, "global": false, "goalValue": 0.29590841411019575, "hidden": false, "incremental": true, "lockedIcons": [{"slug": "vIgSy7Si", "url": "nr1wMVSr"}, {"slug": "AKn5fkAF", "url": "51c78EOY"}, {"slug": "mVpEsKsz", "url": "d8BCg7mO"}], "name": {"PCfmEsMx": "YhLjXpHd", "uAMMrINv": "2czJWRF6", "3RAIOmvR": "tBJNDqGL"}, "statCode": "3QvAy4dx", "tags": ["Uz6slUSV", "TlOmE1va", "zge1Y9vt"], "unlockedIcons": [{"slug": "1GIg7V4M", "url": "hULWpxQp"}, {"slug": "b59faZT4", "url": "7QzWOEP1"}, {"slug": "ePK7nQiN", "url": "7sOQPDOT"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op AdminUpdateAchievement \
    --achievementCode '8JlDKvw0' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'AdminUpdateAchievement' test.out

#- 8 AdminDeleteAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminDeleteAchievement \
    --achievementCode 'h9bjksdL' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 8 'AdminDeleteAchievement' test.out

#- 9 AdminUpdateAchievementListOrder
# body param: body
echo '{"targetOrder": 77}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op AdminUpdateAchievementListOrder \
    --achievementCode 'h66bBgl8' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'AdminUpdateAchievementListOrder' test.out

#- 10 AdminListGlobalAchievements
$CLI_EXE \
    --sn achievement \
    --op AdminListGlobalAchievements \
    --namespace $AB_NAMESPACE \
    --achievementCodes 'XyVDTabG' \
    --limit '75' \
    --offset '92' \
    --sortBy 'achievedAt:desc' \
    --status 'alvUj82S' \
    --tags '["rh6l1Bdi", "csFFB5I9", "xaER5fzG"]' \
    > test.out 2>&1
eval_tap $? 10 'AdminListGlobalAchievements' test.out

#- 11 AdminListGlobalAchievementContributors
$CLI_EXE \
    --sn achievement \
    --op AdminListGlobalAchievementContributors \
    --achievementCode 'echr9geT' \
    --namespace $AB_NAMESPACE \
    --limit '21' \
    --offset '93' \
    --sortBy 'contributedValue:desc' \
    > test.out 2>&1
eval_tap $? 11 'AdminListGlobalAchievementContributors' test.out

#- 12 ResetGlobalAchievement
$CLI_EXE \
    --sn achievement \
    --op ResetGlobalAchievement \
    --achievementCode 'gDOmRDYM' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 12 'ResetGlobalAchievement' test.out

#- 13 BulkCreatePSNEvent
# body param: body
echo '{"data": [{"events": [{"dateTime": "Zrj1ztAA", "eventData": {"eventName": "ZeBtBY9T", "properties": {"aL7rJivg": {}, "NBufVFAy": {}, "OHcInh7M": {}}}, "eventId": "MfP9izO5", "version": "0fBX39mB"}, {"dateTime": "l3FbX39J", "eventData": {"eventName": "aUOogXB2", "properties": {"0Rki8bzt": {}, "ZGQyVPEH": {}, "sZFV51Cy": {}}}, "eventId": "WdmazORp", "version": "ntN0Ci4k"}, {"dateTime": "8R1r9xtY", "eventData": {"eventName": "5zCY2Zu6", "properties": {"SL49Cjd2": {}, "lkHKrOaR": {}, "RTzdYuj1": {}}}, "eventId": "EQTUUnF3", "version": "D4dF2heO"}], "thirdPartyUserId": "v6NSHzA1", "userId": "Mpp3S3WB"}, {"events": [{"dateTime": "iTbrCoxt", "eventData": {"eventName": "NijbBCut", "properties": {"kRKjPVLS": {}, "vGDfMmfZ": {}, "IeNEzzCb": {}}}, "eventId": "nPX66zuK", "version": "tzTJjsBM"}, {"dateTime": "NDPMKFXz", "eventData": {"eventName": "t5QejKJO", "properties": {"oQDEiG8d": {}, "lGKqZr5z": {}, "FpYLL8HZ": {}}}, "eventId": "qeGDWLHx", "version": "JuaWJH8U"}, {"dateTime": "ckvx5UNt", "eventData": {"eventName": "ZKOKgOli", "properties": {"GAxjf9lY": {}, "HiCoUXe2": {}, "kVgNfl0j": {}}}, "eventId": "ZM04aVNG", "version": "RXYkw7C1"}], "thirdPartyUserId": "g6UapIor", "userId": "aKorleI2"}, {"events": [{"dateTime": "5u0EqW7K", "eventData": {"eventName": "i2mkevQM", "properties": {"ZVkfaDBF": {}, "Wsi8UL6f": {}, "0t3w2w5e": {}}}, "eventId": "PvVF7AiN", "version": "ZDj9f08j"}, {"dateTime": "ephQo9nT", "eventData": {"eventName": "pAVU0b69", "properties": {"GVqusei9": {}, "wOg2FGtk": {}, "rmrYtREr": {}}}, "eventId": "nIe864o0", "version": "mI5Oob34"}, {"dateTime": "K2rOJQt1", "eventData": {"eventName": "cZ2x0ORJ", "properties": {"5RtHAbUs": {}, "iVMNajap": {}, "iJm35z1p": {}}}, "eventId": "hXN7r4PR", "version": "YMh4PWqz"}], "thirdPartyUserId": "TlfBG9AV", "userId": "Ae4bkibW"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op BulkCreatePSNEvent \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'BulkCreatePSNEvent' test.out

#- 14 AdminListTags
$CLI_EXE \
    --sn achievement \
    --op AdminListTags \
    --namespace $AB_NAMESPACE \
    --limit '74' \
    --name 'Y88XUtsf' \
    --offset '84' \
    --sortBy 'createdAt:desc' \
    > test.out 2>&1
eval_tap $? 14 'AdminListTags' test.out

#- 15 AdminListUserAchievements
$CLI_EXE \
    --sn achievement \
    --op AdminListUserAchievements \
    --namespace $AB_NAMESPACE \
    --userId 'th7XeXZa' \
    --limit '10' \
    --offset '29' \
    --preferUnlocked 'false' \
    --sortBy 'createdAt:asc' \
    --tags '["OXOOpfv9", "BOskWsBV", "GFIhKpCP"]' \
    > test.out 2>&1
eval_tap $? 15 'AdminListUserAchievements' test.out

#- 16 AdminBulkUnlockAchievement
# body param: body
echo '{"achievementCodes": ["VXLmmAwG", "2XlJInpy", "Bswnlx7v"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op AdminBulkUnlockAchievement \
    --namespace $AB_NAMESPACE \
    --userId 'FlqTsbp8' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'AdminBulkUnlockAchievement' test.out

#- 17 AdminResetAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminResetAchievement \
    --achievementCode 'wH2mCaga' \
    --namespace $AB_NAMESPACE \
    --userId 'S8ljQcyg' \
    > test.out 2>&1
eval_tap $? 17 'AdminResetAchievement' test.out

#- 18 AdminUnlockAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminUnlockAchievement \
    --achievementCode 'bN0Ig4JL' \
    --namespace $AB_NAMESPACE \
    --userId 'HETBbKzZ' \
    > test.out 2>&1
eval_tap $? 18 'AdminUnlockAchievement' test.out

#- 19 AdminAnonymizeUserAchievement
$CLI_EXE \
    --sn achievement \
    --op AdminAnonymizeUserAchievement \
    --namespace $AB_NAMESPACE \
    --userId 'uLIodA7x' \
    > test.out 2>&1
eval_tap $? 19 'AdminAnonymizeUserAchievement' test.out

#- 20 AdminListUserContributions
$CLI_EXE \
    --sn achievement \
    --op AdminListUserContributions \
    --namespace $AB_NAMESPACE \
    --userId 'kwCWFVfU' \
    --achievementCodes '6ib6SNnx' \
    --limit '79' \
    --offset '17' \
    --sortBy 'contributedValue:desc' \
    --tags '["tVF2m1Q3", "v1xhrvCB", "xFcbBm9x"]' \
    > test.out 2>&1
eval_tap $? 20 'AdminListUserContributions' test.out

#- 21 PublicListAchievements
$CLI_EXE \
    --sn achievement \
    --op PublicListAchievements \
    --namespace $AB_NAMESPACE \
    --global 'true' \
    --limit '88' \
    --offset '25' \
    --sortBy 'createdAt' \
    --tags '["07FLs5o0", "j5olgEDg", "o9TsuETp"]' \
    --language 'OxH2RTzp' \
    > test.out 2>&1
eval_tap $? 21 'PublicListAchievements' test.out

#- 22 PublicGetAchievement
$CLI_EXE \
    --sn achievement \
    --op PublicGetAchievement \
    --achievementCode 'vJEQCXAe' \
    --namespace $AB_NAMESPACE \
    --language 'zue1OIWj' \
    > test.out 2>&1
eval_tap $? 22 'PublicGetAchievement' test.out

#- 23 PublicListGlobalAchievements
$CLI_EXE \
    --sn achievement \
    --op PublicListGlobalAchievements \
    --namespace $AB_NAMESPACE \
    --achievementCodes 'SINMiGsB' \
    --limit '96' \
    --offset '91' \
    --sortBy 'createdAt:asc' \
    --status '6sFfFjag' \
    --tags '["zuRnRZzK", "oUFrX3It", "rY3Zg7IN"]' \
    > test.out 2>&1
eval_tap $? 23 'PublicListGlobalAchievements' test.out

#- 24 ListGlobalAchievementContributors
$CLI_EXE \
    --sn achievement \
    --op ListGlobalAchievementContributors \
    --achievementCode 'SMdBspha' \
    --namespace $AB_NAMESPACE \
    --limit '22' \
    --offset '60' \
    --sortBy 'contributedValue' \
    > test.out 2>&1
eval_tap $? 24 'ListGlobalAchievementContributors' test.out

#- 25 PublicListTags
$CLI_EXE \
    --sn achievement \
    --op PublicListTags \
    --namespace $AB_NAMESPACE \
    --limit '38' \
    --name 'xnLMkU5f' \
    --offset '37' \
    --sortBy 'createdAt:desc' \
    > test.out 2>&1
eval_tap $? 25 'PublicListTags' test.out

#- 26 PublicListUserAchievements
$CLI_EXE \
    --sn achievement \
    --op PublicListUserAchievements \
    --namespace $AB_NAMESPACE \
    --userId '9kFePXNG' \
    --limit '23' \
    --offset '89' \
    --preferUnlocked 'false' \
    --sortBy 'createdAt:asc' \
    --tags '["kTJA9v3c", "Q8PJaGr5", "znHNHP1Q"]' \
    > test.out 2>&1
eval_tap $? 26 'PublicListUserAchievements' test.out

#- 27 PublicBulkUnlockAchievement
# body param: body
echo '{"achievementCodes": ["9qzeO8vh", "eKIupj7N", "NkHJF0VW"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn achievement \
    --op PublicBulkUnlockAchievement \
    --namespace $AB_NAMESPACE \
    --userId 'ZJ88pwTO' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 27 'PublicBulkUnlockAchievement' test.out

#- 28 PublicUnlockAchievement
$CLI_EXE \
    --sn achievement \
    --op PublicUnlockAchievement \
    --achievementCode '9RxU3o07' \
    --namespace $AB_NAMESPACE \
    --userId 'ghTPXU7o' \
    > test.out 2>&1
eval_tap $? 28 'PublicUnlockAchievement' test.out

#- 29 ListUserContributions
$CLI_EXE \
    --sn achievement \
    --op ListUserContributions \
    --namespace $AB_NAMESPACE \
    --userId 'UJvmMDLu' \
    --achievementCodes 'Y6s3OORl' \
    --limit '69' \
    --offset '93' \
    --sortBy 'contributedValue:desc' \
    --tags '["xqJ8RYvN", "vxfjyLO8", "N2YU8BSA"]' \
    > test.out 2>&1
eval_tap $? 29 'ListUserContributions' test.out

#- 30 ClaimGlobalAchievementReward
$CLI_EXE \
    --sn achievement \
    --op ClaimGlobalAchievementReward \
    --achievementCode 'usbFIya9' \
    --namespace $AB_NAMESPACE \
    --userId 'OeoKlxdX' \
    > test.out 2>&1
eval_tap $? 30 'ClaimGlobalAchievementReward' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE