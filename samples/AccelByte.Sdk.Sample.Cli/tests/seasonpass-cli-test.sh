#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 
# - template file: 

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..45"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 ExportSeason
$CLI_EXE \
    --sn seasonpass \
    --op ExportSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 2 'ExportSeason' test.out

#- 3 QuerySeasons
$CLI_EXE \
    --sn seasonpass \
    --op QuerySeasons \
    --namespace $AB_NAMESPACE \
    --limit '17' \
    --offset '81' \
    --status '["PUBLISHED", "DRAFT", "DRAFT"]' \
    > test.out 2>&1
eval_tap $? 3 'QuerySeasons' test.out

#- 4 CreateSeason
# body param: body
echo '{"autoClaim": true, "defaultLanguage": "ZijKHqjx", "defaultRequiredExp": 96, "draftStoreId": "jDJVNSYe", "end": "1986-11-16T00:00:00Z", "excessStrategy": {"currency": "sEAV85z6", "method": "NONE", "percentPerExp": 17}, "images": [{"as": "NRhBLsi4", "caption": "ajAw4c0P", "height": 34, "imageUrl": "xh9Y4nfb", "smallImageUrl": "OxvGWrok", "width": 55}, {"as": "gTyrmK4F", "caption": "MZqTFAMs", "height": 32, "imageUrl": "bqvPZKDo", "smallImageUrl": "aIdP7NG3", "width": 98}, {"as": "jmtMAtnS", "caption": "Kbaj3Qy9", "height": 48, "imageUrl": "0hcQ6bD4", "smallImageUrl": "i3UGbaNk", "width": 91}], "localizations": {"nGjQDlwU": {"description": "u0tgxYC3", "title": "QctBFpcE"}, "GClzkioc": {"description": "wV6HV1wv", "title": "W7bLtAHX"}, "LGQqh76v": {"description": "QE5vcHQI", "title": "ePJqyVdA"}}, "name": "8tlVaekc", "start": "1983-12-10T00:00:00Z", "tierItemId": "4iRCNChB"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateSeason \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'CreateSeason' test.out

#- 5 GetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'GetCurrentSeason' test.out

#- 6 BulkGetUserSeasonProgression
# body param: body
echo '{"userIds": ["nUF0bicN", "lltvEhhe", "TbSJvhJt"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op BulkGetUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 6 'BulkGetUserSeasonProgression' test.out

#- 7 GetSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'gNrZ4898' \
    > test.out 2>&1
eval_tap $? 7 'GetSeason' test.out

#- 8 DeleteSeason
$CLI_EXE \
    --sn seasonpass \
    --op DeleteSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'uARAg2ih' \
    > test.out 2>&1
eval_tap $? 8 'DeleteSeason' test.out

#- 9 UpdateSeason
# body param: body
echo '{"autoClaim": false, "defaultLanguage": "eOrx5qWf", "defaultRequiredExp": 96, "draftStoreId": "Scubmasx", "end": "1983-10-15T00:00:00Z", "excessStrategy": {"currency": "vW3gk6et", "method": "NONE", "percentPerExp": 58}, "images": [{"as": "XjfNRdEQ", "caption": "UszXoKS7", "height": 80, "imageUrl": "wuH5SYax", "smallImageUrl": "tVlxsB7z", "width": 59}, {"as": "i7R7dv9O", "caption": "nQEMI59P", "height": 33, "imageUrl": "TXA9TSUx", "smallImageUrl": "wBiqt8T7", "width": 10}, {"as": "Akkw7vcJ", "caption": "jMDZf6ZR", "height": 45, "imageUrl": "zvV22st5", "smallImageUrl": "qpRMQAlg", "width": 41}], "localizations": {"IGKLouwR": {"description": "SyMDuFHU", "title": "FbSb1JIH"}, "1X0byruq": {"description": "v6D8LE4V", "title": "rPP7rNMB"}, "rDtxrqDc": {"description": "ApVpLHTP", "title": "1MMj71TZ"}}, "name": "eEbgcsAv", "start": "1997-06-19T00:00:00Z", "tierItemId": "LWQtm4sL"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'boNWNj5O' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'UpdateSeason' test.out

#- 10 CloneSeason
# body param: body
echo '{"end": "1977-08-08T00:00:00Z", "name": "NAcl47HT", "start": "1988-03-03T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CloneSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'EjAo1buX' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'CloneSeason' test.out

#- 11 GetFullSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetFullSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '4IWw59jo' \
    > test.out 2>&1
eval_tap $? 11 'GetFullSeason' test.out

#- 12 QueryPasses
$CLI_EXE \
    --sn seasonpass \
    --op QueryPasses \
    --namespace $AB_NAMESPACE \
    --seasonId '85R8qeXM' \
    > test.out 2>&1
eval_tap $? 12 'QueryPasses' test.out

#- 13 CreatePass
# body param: body
echo '{"autoEnroll": false, "code": "7I8O3kPm", "displayOrder": 81, "images": [{"as": "mpM99PpF", "caption": "g3muquBM", "height": 68, "imageUrl": "59eB7qWb", "smallImageUrl": "pR3dvui2", "width": 23}, {"as": "fB2zpWez", "caption": "JiHkmYaQ", "height": 97, "imageUrl": "Bgcy6EMZ", "smallImageUrl": "DgtGpvvo", "width": 95}, {"as": "EWpOY541", "caption": "sJs8wtVq", "height": 72, "imageUrl": "h6WMGALk", "smallImageUrl": "Xn8DCU4D", "width": 67}], "localizations": {"0QpPay3V": {"description": "NPvRs5MU", "title": "FdMa7W27"}, "EhybvCrl": {"description": "M5T1t60w", "title": "29F0TDuc"}, "whXJYh2R": {"description": "Omve30Bk", "title": "cGpMTvhh"}}, "passItemId": "Um3bgewN"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreatePass \
    --namespace $AB_NAMESPACE \
    --seasonId '8x1wiPzd' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'CreatePass' test.out

#- 14 GetPass
$CLI_EXE \
    --sn seasonpass \
    --op GetPass \
    --code 'IYMiWulr' \
    --namespace $AB_NAMESPACE \
    --seasonId '9EpBDt2x' \
    > test.out 2>&1
eval_tap $? 14 'GetPass' test.out

#- 15 DeletePass
$CLI_EXE \
    --sn seasonpass \
    --op DeletePass \
    --code 'Mla0XNtN' \
    --namespace $AB_NAMESPACE \
    --seasonId 'gYxa6Y3R' \
    > test.out 2>&1
eval_tap $? 15 'DeletePass' test.out

#- 16 UpdatePass
# body param: body
echo '{"autoEnroll": true, "displayOrder": 27, "images": [{"as": "hwoNNG1r", "caption": "lGt1IPiY", "height": 67, "imageUrl": "hsAX552r", "smallImageUrl": "7JB9TRsj", "width": 73}, {"as": "ymSxR7a3", "caption": "Z6VwNohC", "height": 82, "imageUrl": "aA1r6uy7", "smallImageUrl": "WEBYiDHg", "width": 99}, {"as": "Y0ggU9x7", "caption": "2L0Im4RI", "height": 33, "imageUrl": "Kay3hKYn", "smallImageUrl": "AuGbAddd", "width": 50}], "localizations": {"AO7DcLZ3": {"description": "TM1DSJ8U", "title": "LgGSSlLN"}, "lAJRrEXC": {"description": "sqavkgwP", "title": "pByWIZC2"}, "nd4YEFJe": {"description": "FrRP7KgV", "title": "IQpMqJ9c"}}, "passItemId": "Muditoha"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdatePass \
    --code 'EJYh9Jnf' \
    --namespace $AB_NAMESPACE \
    --seasonId 'wzibpzrz' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'UpdatePass' test.out

#- 17 PublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'J1z9v5ok' \
    > test.out 2>&1
eval_tap $? 17 'PublishSeason' test.out

#- 18 RetireSeason
$CLI_EXE \
    --sn seasonpass \
    --op RetireSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'HCQZc4xT' \
    --force 'true' \
    > test.out 2>&1
eval_tap $? 18 'RetireSeason' test.out

#- 19 QueryRewards
$CLI_EXE \
    --sn seasonpass \
    --op QueryRewards \
    --namespace $AB_NAMESPACE \
    --seasonId 'FCtBjur5' \
    --q 'RVjCvq3h' \
    > test.out 2>&1
eval_tap $? 19 'QueryRewards' test.out

#- 20 CreateReward
# body param: body
echo '{"code": "9eMw8aS9", "currency": {"currencyCode": "3gWG7819", "namespace": "MWA4BilK"}, "image": {"as": "Z3XFrCaI", "caption": "IGjD9op6", "height": 73, "imageUrl": "kYiRiLG7", "smallImageUrl": "WdNeWamS", "width": 10}, "itemId": "Cvc1fYV1", "quantity": 62, "type": "ITEM"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateReward \
    --namespace $AB_NAMESPACE \
    --seasonId 'J854MHav' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 20 'CreateReward' test.out

#- 21 GetReward
$CLI_EXE \
    --sn seasonpass \
    --op GetReward \
    --code '82suKZGX' \
    --namespace $AB_NAMESPACE \
    --seasonId 'TQQN8WNS' \
    > test.out 2>&1
eval_tap $? 21 'GetReward' test.out

#- 22 DeleteReward
$CLI_EXE \
    --sn seasonpass \
    --op DeleteReward \
    --code 'N28IA24k' \
    --namespace $AB_NAMESPACE \
    --seasonId 'RAXSLaMt' \
    > test.out 2>&1
eval_tap $? 22 'DeleteReward' test.out

#- 23 UpdateReward
# body param: body
echo '{"currency": {"currencyCode": "gGYCc8ym", "namespace": "0A3i3bQE"}, "image": {"as": "Nhx9cmuY", "caption": "B6kzey9m", "height": 59, "imageUrl": "xND7AIQ7", "smallImageUrl": "vQdvj5Pz", "width": 46}, "itemId": "zQVZS3qY", "nullFields": ["QLO6fhF8", "kztE6GxW", "iZNU9kqh"], "quantity": 97, "type": "CURRENCY"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateReward \
    --code 'OKpnLGlg' \
    --namespace $AB_NAMESPACE \
    --seasonId 'NNKlZSAn' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'UpdateReward' test.out

#- 24 QueryTiers
$CLI_EXE \
    --sn seasonpass \
    --op QueryTiers \
    --namespace $AB_NAMESPACE \
    --seasonId 'qXv8unUt' \
    --limit '72' \
    --offset '38' \
    > test.out 2>&1
eval_tap $? 24 'QueryTiers' test.out

#- 25 CreateTier
# body param: body
echo '{"index": 20, "quantity": 79, "tier": {"requiredExp": 17, "rewards": {"u3JPxqrQ": ["8WEzpIUh", "3FbEcAop", "f1ZiuNzK"], "9exlzzgH": ["scmYTuTO", "eIA1KovA", "JpgK5vV2"], "idtwNo9W": ["6iZ3AL89", "4MdYsqs6", "iavHICtm"]}}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateTier \
    --namespace $AB_NAMESPACE \
    --seasonId 'KAHL25H9' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'CreateTier' test.out

#- 26 UpdateTier
# body param: body
echo '{"requiredExp": 84, "rewards": {"zY9zb2Ym": ["TsUavTEC", "gdVlgaj2", "N5mIqyng"], "6ZHzSyHk": ["6kaUi3ST", "VuHwEkm8", "1VdrJHeq"], "n7p9qFu7": ["y8xF07Gw", "aTWr81um", "ZP6UCvT6"]}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateTier \
    --id 'tyYE61kn' \
    --namespace $AB_NAMESPACE \
    --seasonId 'WxgtEUFy' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'UpdateTier' test.out

#- 27 DeleteTier
$CLI_EXE \
    --sn seasonpass \
    --op DeleteTier \
    --id '6KXKpIGq' \
    --namespace $AB_NAMESPACE \
    --seasonId 'UXpD05UL' \
    > test.out 2>&1
eval_tap $? 27 'DeleteTier' test.out

#- 28 ReorderTier
# body param: body
echo '{"newIndex": 86}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op ReorderTier \
    --id 'r1b1Kmx3' \
    --namespace $AB_NAMESPACE \
    --seasonId 'i5b1Dg5Z' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 28 'ReorderTier' test.out

#- 29 UnpublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op UnpublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'FoD06OZg' \
    --force 'false' \
    > test.out 2>&1
eval_tap $? 29 'UnpublishSeason' test.out

#- 30 GetUserParticipatedSeasons
$CLI_EXE \
    --sn seasonpass \
    --op GetUserParticipatedSeasons \
    --namespace $AB_NAMESPACE \
    --userId 'q73eAF7K' \
    --limit '13' \
    --offset '46' \
    > test.out 2>&1
eval_tap $? 30 'GetUserParticipatedSeasons' test.out

#- 31 GrantUserExp
# body param: body
echo '{"exp": 85, "source": "SWEAT", "tags": ["Qko2zdiq", "N7qyA2Ij", "5Dy5LMxB"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserExp \
    --namespace $AB_NAMESPACE \
    --userId 'cu8Fu0sM' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 31 'GrantUserExp' test.out

#- 32 GrantUserPass
# body param: body
echo '{"passCode": "01KapC3I", "passItemId": "waQxfjWq"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserPass \
    --namespace $AB_NAMESPACE \
    --userId '45zTqznF' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 32 'GrantUserPass' test.out

#- 33 ExistsAnyPassByPassCodes
$CLI_EXE \
    --sn seasonpass \
    --op ExistsAnyPassByPassCodes \
    --namespace $AB_NAMESPACE \
    --userId 'VJ1pdDcU' \
    --passCodes '["CKwmXo8K", "dMHt1ZRK", "0h5nMecr"]' \
    > test.out 2>&1
eval_tap $? 33 'ExistsAnyPassByPassCodes' test.out

#- 34 GetCurrentUserSeasonProgression
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --userId 'y7y3reFx' \
    > test.out 2>&1
eval_tap $? 34 'GetCurrentUserSeasonProgression' test.out

#- 35 CheckSeasonPurchasable
# body param: body
echo '{"passItemId": "Sgq9ppHZ", "tierItemCount": 17, "tierItemId": "0WT7KQyD"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CheckSeasonPurchasable \
    --namespace $AB_NAMESPACE \
    --userId 'RdfgylhL' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 35 'CheckSeasonPurchasable' test.out

#- 36 ResetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op ResetUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'uQJq0kC9' \
    > test.out 2>&1
eval_tap $? 36 'ResetUserSeason' test.out

#- 37 GrantUserTier
# body param: body
echo '{"count": 49, "source": "SWEAT", "tags": ["kyTG7KJF", "7sRp4fT2", "T5phuf0R"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserTier \
    --namespace $AB_NAMESPACE \
    --userId 'ssGWT5JR' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 37 'GrantUserTier' test.out

#- 38 QueryUserExpGrantHistory
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistory \
    --namespace $AB_NAMESPACE \
    --userId 'BZF2yLFu' \
    --from 'rlWVLu1X' \
    --limit '30' \
    --offset '24' \
    --seasonId '2h8oVanc' \
    --source 'PAID_FOR' \
    --tags '["6Vz5UmCQ", "bYzmTwda", "DHmBKXlP"]' \
    --to 'llDdFl3N' \
    > test.out 2>&1
eval_tap $? 38 'QueryUserExpGrantHistory' test.out

#- 39 QueryUserExpGrantHistoryTag
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistoryTag \
    --namespace $AB_NAMESPACE \
    --userId 'phYASEq4' \
    --seasonId 'Psku6KOp' \
    > test.out 2>&1
eval_tap $? 39 'QueryUserExpGrantHistoryTag' test.out

#- 40 GetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'OuDhXDTa' \
    --userId 's4Kmu66O' \
    > test.out 2>&1
eval_tap $? 40 'GetUserSeason' test.out

#- 41 PublicGetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentSeason \
    --namespace $AB_NAMESPACE \
    --language '12HzyS4N' \
    > test.out 2>&1
eval_tap $? 41 'PublicGetCurrentSeason' test.out

#- 42 PublicGetCurrentUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'Z88vTPD7' \
    > test.out 2>&1
eval_tap $? 42 'PublicGetCurrentUserSeason' test.out

#- 43 PublicClaimUserReward
# body param: body
echo '{"passCode": "b4uH616N", "rewardCode": "EgNDskP3", "tierIndex": 42}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op PublicClaimUserReward \
    --namespace $AB_NAMESPACE \
    --userId 'VQfU5PZl' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 43 'PublicClaimUserReward' test.out

#- 44 PublicBulkClaimUserRewards
$CLI_EXE \
    --sn seasonpass \
    --op PublicBulkClaimUserRewards \
    --namespace $AB_NAMESPACE \
    --userId 'HzyhhpL4' \
    > test.out 2>&1
eval_tap $? 44 'PublicBulkClaimUserRewards' test.out

#- 45 PublicGetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'MwmJtzir' \
    --userId 'j7zzBSud' \
    > test.out 2>&1
eval_tap $? 45 'PublicGetUserSeason' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE