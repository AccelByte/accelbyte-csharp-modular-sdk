#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 
# - template file: 

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..46"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 ExportSeason
$CLI_EXE \
    --sn seasonpass \
    --op ExportSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 2 'ExportSeason' test.out

#- 3 QuerySeasons
$CLI_EXE \
    --sn seasonpass \
    --op QuerySeasons \
    --namespace $AB_NAMESPACE \
    --limit '73' \
    --offset '63' \
    --status '["DRAFT", "DRAFT", "PUBLISHED"]' \
    > test.out 2>&1
eval_tap $? 3 'QuerySeasons' test.out

#- 4 CreateSeason
# body param: body
echo '{"autoClaim": true, "defaultLanguage": "7PrNT0wB", "defaultRequiredExp": 83, "draftStoreId": "IeKNRMXK", "end": "1978-10-21T00:00:00Z", "excessStrategy": {"currency": "TDdj6Une", "method": "CURRENCY", "percentPerExp": 52}, "images": [{"as": "UMYZwSlX", "caption": "eE8uKbeu", "height": 75, "imageUrl": "Q6VfIPhY", "smallImageUrl": "skCqehZu", "width": 16}, {"as": "5qJDsWgf", "caption": "2FxdQ3WW", "height": 96, "imageUrl": "hQAR0EZI", "smallImageUrl": "ikUZCl5H", "width": 12}, {"as": "sm9HVlcl", "caption": "iyFGpsyr", "height": 94, "imageUrl": "9WSPh9ye", "smallImageUrl": "5pRtkFGc", "width": 70}], "localizations": {"ikeqzK7R": {"description": "YBUOhTNH", "title": "G3t9gBim"}, "XraZdRso": {"description": "wKPwGlt5", "title": "rIBWsi73"}, "3iYF16o0": {"description": "x9N2WGiM", "title": "5sEUToVh"}}, "name": "jCQ3Ryrn", "start": "1994-09-26T00:00:00Z", "tierItemId": "CwUENlJA"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateSeason \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'CreateSeason' test.out

#- 5 GetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'GetCurrentSeason' test.out

#- 6 BulkGetUserSeasonProgression
# body param: body
echo '{"userIds": ["WJWHxoZG", "ZlCGvm3z", "GXQ1lAVr"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op BulkGetUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 6 'BulkGetUserSeasonProgression' test.out

#- 7 GetItemReferences
$CLI_EXE \
    --sn seasonpass \
    --op GetItemReferences \
    --namespace $AB_NAMESPACE \
    --itemId 'H94LcKmu' \
    > test.out 2>&1
eval_tap $? 7 'GetItemReferences' test.out

#- 8 GetSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'd7iiOsIQ' \
    > test.out 2>&1
eval_tap $? 8 'GetSeason' test.out

#- 9 DeleteSeason
$CLI_EXE \
    --sn seasonpass \
    --op DeleteSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'o5Xnzlmw' \
    > test.out 2>&1
eval_tap $? 9 'DeleteSeason' test.out

#- 10 UpdateSeason
# body param: body
echo '{"autoClaim": false, "defaultLanguage": "SlLwt4B4", "defaultRequiredExp": 19, "draftStoreId": "J0xlV0fr", "end": "1997-05-28T00:00:00Z", "excessStrategy": {"currency": "SdLPvGJO", "method": "CURRENCY", "percentPerExp": 13}, "images": [{"as": "wrm4LJU3", "caption": "lkmjSJkQ", "height": 24, "imageUrl": "UBy4qMRA", "smallImageUrl": "y4Njd9Re", "width": 59}, {"as": "t4u0fRgr", "caption": "vZqxxX6L", "height": 36, "imageUrl": "hYgq2A1P", "smallImageUrl": "T9oWWtbv", "width": 94}, {"as": "GM3tl1eP", "caption": "KC4jcdxV", "height": 14, "imageUrl": "FkFY9t6X", "smallImageUrl": "S5w0AEUQ", "width": 17}], "localizations": {"09RcTxMQ": {"description": "ZPjx8KZF", "title": "sr13c8ZW"}, "ibxUczge": {"description": "HhGKKmO1", "title": "GzmwlcJO"}, "VvyvblWb": {"description": "6LJ1GDjC", "title": "8g5d48Zf"}}, "name": "e70rpnuS", "start": "1974-01-02T00:00:00Z", "tierItemId": "91yvgNkL"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'qMB7YmM9' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'UpdateSeason' test.out

#- 11 CloneSeason
# body param: body
echo '{"end": "1975-03-18T00:00:00Z", "name": "Jz0nawZq", "start": "1981-03-18T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CloneSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'xLTGZOUi' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 11 'CloneSeason' test.out

#- 12 GetFullSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetFullSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'ptYTOG4s' \
    > test.out 2>&1
eval_tap $? 12 'GetFullSeason' test.out

#- 13 QueryPasses
$CLI_EXE \
    --sn seasonpass \
    --op QueryPasses \
    --namespace $AB_NAMESPACE \
    --seasonId '3D0uS068' \
    > test.out 2>&1
eval_tap $? 13 'QueryPasses' test.out

#- 14 CreatePass
# body param: body
echo '{"autoEnroll": false, "code": "PixlzvQx", "displayOrder": 65, "images": [{"as": "eIB0iqkx", "caption": "J3b7N6Ul", "height": 12, "imageUrl": "2OH1fegZ", "smallImageUrl": "PzEPyty8", "width": 10}, {"as": "i7BdIfdJ", "caption": "F5NvEl8H", "height": 100, "imageUrl": "wdyB5cHA", "smallImageUrl": "N2uBd2ZZ", "width": 29}, {"as": "qsMhMKdA", "caption": "MHBxEoHz", "height": 13, "imageUrl": "xSm90SPx", "smallImageUrl": "gF51G5e7", "width": 28}], "localizations": {"RQhqRfO0": {"description": "HYw0NB3k", "title": "NTj4M2h2"}, "T7xNRgS5": {"description": "40ejLKYe", "title": "3tl8tgz5"}, "AQ9Ox81i": {"description": "9erXLiNX", "title": "BxVkgkpb"}}, "passItemId": "6VhsV2BQ"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreatePass \
    --namespace $AB_NAMESPACE \
    --seasonId 'Kiyaurx7' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 14 'CreatePass' test.out

#- 15 GetPass
$CLI_EXE \
    --sn seasonpass \
    --op GetPass \
    --code 'ilOWU7H3' \
    --namespace $AB_NAMESPACE \
    --seasonId 'l9O7Cys6' \
    > test.out 2>&1
eval_tap $? 15 'GetPass' test.out

#- 16 DeletePass
$CLI_EXE \
    --sn seasonpass \
    --op DeletePass \
    --code 'QBeZLvfm' \
    --namespace $AB_NAMESPACE \
    --seasonId 'ibjlZCbi' \
    > test.out 2>&1
eval_tap $? 16 'DeletePass' test.out

#- 17 UpdatePass
# body param: body
echo '{"autoEnroll": true, "displayOrder": 97, "images": [{"as": "nUHgHSJA", "caption": "g0I5AGmT", "height": 67, "imageUrl": "rkaDR6x6", "smallImageUrl": "w4rlPjRf", "width": 50}, {"as": "Q455ZklQ", "caption": "05NH3OfC", "height": 99, "imageUrl": "ECnn5CPj", "smallImageUrl": "Hco9PfEh", "width": 9}, {"as": "XijZQPzc", "caption": "8M5UhXSm", "height": 49, "imageUrl": "giXbc26l", "smallImageUrl": "zi7Fygg6", "width": 66}], "localizations": {"MUl91dCn": {"description": "N8NaAsyd", "title": "2rkc9UyB"}, "GWIPXbWH": {"description": "UAy1QtRg", "title": "WYGDju4v"}, "Dks0yYvZ": {"description": "J7TE0oBg", "title": "RqfaD8Rt"}}, "passItemId": "JwUMbpMw"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdatePass \
    --code 'QFnGZmFQ' \
    --namespace $AB_NAMESPACE \
    --seasonId '8Iq6Dbrl' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 17 'UpdatePass' test.out

#- 18 PublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'zvO8d6qB' \
    > test.out 2>&1
eval_tap $? 18 'PublishSeason' test.out

#- 19 RetireSeason
$CLI_EXE \
    --sn seasonpass \
    --op RetireSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '9FVzHVtM' \
    --force 'false' \
    > test.out 2>&1
eval_tap $? 19 'RetireSeason' test.out

#- 20 QueryRewards
$CLI_EXE \
    --sn seasonpass \
    --op QueryRewards \
    --namespace $AB_NAMESPACE \
    --seasonId 'lxabuWZp' \
    --q 'zcYh88qS' \
    > test.out 2>&1
eval_tap $? 20 'QueryRewards' test.out

#- 21 CreateReward
# body param: body
echo '{"code": "Aq0BP2eO", "currency": {"currencyCode": "iLYxTMt6", "namespace": "Fte4xVAG"}, "image": {"as": "UYNvUW8U", "caption": "baS3qER0", "height": 59, "imageUrl": "tZByTo99", "smallImageUrl": "vbo4TQWN", "width": 96}, "itemId": "OD4cK36b", "quantity": 71, "type": "CURRENCY"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateReward \
    --namespace $AB_NAMESPACE \
    --seasonId 'rZvofqnl' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'CreateReward' test.out

#- 22 GetReward
$CLI_EXE \
    --sn seasonpass \
    --op GetReward \
    --code 'K5chvdsA' \
    --namespace $AB_NAMESPACE \
    --seasonId '1X2X5aVS' \
    > test.out 2>&1
eval_tap $? 22 'GetReward' test.out

#- 23 DeleteReward
$CLI_EXE \
    --sn seasonpass \
    --op DeleteReward \
    --code 'vCWMDHEv' \
    --namespace $AB_NAMESPACE \
    --seasonId 'IEg5eRam' \
    > test.out 2>&1
eval_tap $? 23 'DeleteReward' test.out

#- 24 UpdateReward
# body param: body
echo '{"currency": {"currencyCode": "4kPMgB6k", "namespace": "TZhPkBFC"}, "image": {"as": "UqwlLg2x", "caption": "sOInWV6x", "height": 8, "imageUrl": "RZbUOLyK", "smallImageUrl": "kLJzoxP2", "width": 24}, "itemId": "gtPWUKLY", "nullFields": ["QgASTgKt", "k45l4G1p", "RfdOjrmG"], "quantity": 57, "type": "ITEM"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateReward \
    --code '8TJYZPxs' \
    --namespace $AB_NAMESPACE \
    --seasonId 'LfwGNKt4' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 24 'UpdateReward' test.out

#- 25 QueryTiers
$CLI_EXE \
    --sn seasonpass \
    --op QueryTiers \
    --namespace $AB_NAMESPACE \
    --seasonId 'VhiErIRi' \
    --limit '64' \
    --offset '80' \
    > test.out 2>&1
eval_tap $? 25 'QueryTiers' test.out

#- 26 CreateTier
# body param: body
echo '{"index": 92, "quantity": 0, "tier": {"requiredExp": 39, "rewards": {"KXi3JTYa": ["lWOh1adH", "vTQkHnlu", "B6Iu47DF"], "Pl2Gatmp": ["1D3MS5lb", "SZAhuc2u", "CGnnKmkL"], "tmeNiSyM": ["rrSPuxqM", "pCCMcGIC", "PNW4KNWx"]}}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateTier \
    --namespace $AB_NAMESPACE \
    --seasonId 'vaoZ13eO' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'CreateTier' test.out

#- 27 UpdateTier
# body param: body
echo '{"requiredExp": 74, "rewards": {"9BD6Nduq": ["AiR5X8IP", "fxADWTxh", "G2w808DT"], "OYXgx0jQ": ["0fzl6KeN", "cByNyrXA", "gZxKzBcY"], "2bCEhNEU": ["RKFtWQkg", "dMpMp7iS", "iD5XwTPe"]}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateTier \
    --id 'PEMz6xGb' \
    --namespace $AB_NAMESPACE \
    --seasonId 'xlfPEcU3' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 27 'UpdateTier' test.out

#- 28 DeleteTier
$CLI_EXE \
    --sn seasonpass \
    --op DeleteTier \
    --id 'BRf5yfDc' \
    --namespace $AB_NAMESPACE \
    --seasonId 'M96fzyXC' \
    > test.out 2>&1
eval_tap $? 28 'DeleteTier' test.out

#- 29 ReorderTier
# body param: body
echo '{"newIndex": 82}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op ReorderTier \
    --id 'FqQkLODm' \
    --namespace $AB_NAMESPACE \
    --seasonId 'cBsThQpg' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'ReorderTier' test.out

#- 30 UnpublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op UnpublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'ISG7Wwsz' \
    --force 'false' \
    > test.out 2>&1
eval_tap $? 30 'UnpublishSeason' test.out

#- 31 GetUserParticipatedSeasons
$CLI_EXE \
    --sn seasonpass \
    --op GetUserParticipatedSeasons \
    --namespace $AB_NAMESPACE \
    --userId 'caUEwgkD' \
    --limit '75' \
    --offset '19' \
    > test.out 2>&1
eval_tap $? 31 'GetUserParticipatedSeasons' test.out

#- 32 GrantUserExp
# body param: body
echo '{"exp": 5, "source": "SWEAT", "tags": ["Y5Ze0FRn", "RUKKBySn", "M3XWsa6v"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserExp \
    --namespace $AB_NAMESPACE \
    --userId 'TrykG95w' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 32 'GrantUserExp' test.out

#- 33 GrantUserPass
# body param: body
echo '{"passCode": "LzEhrh5Z", "passItemId": "WruzcP2C"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserPass \
    --namespace $AB_NAMESPACE \
    --userId 'GS0yhDV1' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 33 'GrantUserPass' test.out

#- 34 ExistsAnyPassByPassCodes
$CLI_EXE \
    --sn seasonpass \
    --op ExistsAnyPassByPassCodes \
    --namespace $AB_NAMESPACE \
    --userId '5aHlaXwF' \
    --passCodes '["vHyTaqnm", "Vz9GjOAb", "vVx7EDgw"]' \
    > test.out 2>&1
eval_tap $? 34 'ExistsAnyPassByPassCodes' test.out

#- 35 GetCurrentUserSeasonProgression
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --userId 'rMNyj2PK' \
    > test.out 2>&1
eval_tap $? 35 'GetCurrentUserSeasonProgression' test.out

#- 36 CheckSeasonPurchasable
# body param: body
echo '{"passItemId": "LKnkFriH", "tierItemCount": 51, "tierItemId": "QaaDD2Jh"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CheckSeasonPurchasable \
    --namespace $AB_NAMESPACE \
    --userId '74wz0qWH' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 36 'CheckSeasonPurchasable' test.out

#- 37 ResetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op ResetUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'OOmTYOvl' \
    > test.out 2>&1
eval_tap $? 37 'ResetUserSeason' test.out

#- 38 GrantUserTier
# body param: body
echo '{"count": 21, "source": "PAID_FOR", "tags": ["cYKIil7e", "cJSPKRcb", "LhIHOETT"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserTier \
    --namespace $AB_NAMESPACE \
    --userId 'QvLv2UfD' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 38 'GrantUserTier' test.out

#- 39 QueryUserExpGrantHistory
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistory \
    --namespace $AB_NAMESPACE \
    --userId 'YliwJZqq' \
    --from 'MywGC1DB' \
    --limit '31' \
    --offset '66' \
    --seasonId 'AQH2gjOh' \
    --source 'SWEAT' \
    --tags '["zWrY8u7u", "wXjh4Bne", "O8WB3vNY"]' \
    --to 'ipdspqO8' \
    > test.out 2>&1
eval_tap $? 39 'QueryUserExpGrantHistory' test.out

#- 40 QueryUserExpGrantHistoryTag
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistoryTag \
    --namespace $AB_NAMESPACE \
    --userId 'ueCtUnbV' \
    --seasonId 'l9wlUXwe' \
    > test.out 2>&1
eval_tap $? 40 'QueryUserExpGrantHistoryTag' test.out

#- 41 GetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '7xFvyLgl' \
    --userId 'XPpsoIPO' \
    > test.out 2>&1
eval_tap $? 41 'GetUserSeason' test.out

#- 42 PublicGetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentSeason \
    --namespace $AB_NAMESPACE \
    --language 'e73fXJdf' \
    > test.out 2>&1
eval_tap $? 42 'PublicGetCurrentSeason' test.out

#- 43 PublicGetCurrentUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'fGLNqIZM' \
    > test.out 2>&1
eval_tap $? 43 'PublicGetCurrentUserSeason' test.out

#- 44 PublicClaimUserReward
# body param: body
echo '{"passCode": "vK04m5jp", "rewardCode": "Wr15cTmR", "tierIndex": 38}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op PublicClaimUserReward \
    --namespace $AB_NAMESPACE \
    --userId 'Ujal6xEo' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 44 'PublicClaimUserReward' test.out

#- 45 PublicBulkClaimUserRewards
$CLI_EXE \
    --sn seasonpass \
    --op PublicBulkClaimUserRewards \
    --namespace $AB_NAMESPACE \
    --userId 'zlVvzn0d' \
    > test.out 2>&1
eval_tap $? 45 'PublicBulkClaimUserRewards' test.out

#- 46 PublicGetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'zeWc6RnZ' \
    --userId 'sl7lX1Od' \
    > test.out 2>&1
eval_tap $? 46 'PublicGetUserSeason' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE