#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 
# - template file: 

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..45"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 ExportSeason
$CLI_EXE \
    --sn seasonpass \
    --op ExportSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 2 'ExportSeason' test.out

#- 3 QuerySeasons
$CLI_EXE \
    --sn seasonpass \
    --op QuerySeasons \
    --namespace $AB_NAMESPACE \
    --limit '43' \
    --offset '89' \
    --status '["RETIRED", "DRAFT", "DRAFT"]' \
    > test.out 2>&1
eval_tap $? 3 'QuerySeasons' test.out

#- 4 CreateSeason
# body param: body
echo '{"autoClaim": false, "defaultLanguage": "DnnKEUhd", "defaultRequiredExp": 4, "draftStoreId": "3LsJJEUx", "end": "1981-10-26T00:00:00Z", "excessStrategy": {"currency": "2AUy9z0s", "method": "NONE", "percentPerExp": 45}, "images": [{"as": "9od1o4Y7", "caption": "lhCtvZ5V", "height": 54, "imageUrl": "wXdiIOSh", "smallImageUrl": "8MbKe4Mo", "width": 12}, {"as": "l15ncI0B", "caption": "Jw6109Zy", "height": 26, "imageUrl": "rqlP1UFi", "smallImageUrl": "08qhIuuo", "width": 71}, {"as": "f7XakhUY", "caption": "fszqNW0s", "height": 71, "imageUrl": "h37C5z9o", "smallImageUrl": "ZWLmlver", "width": 6}], "localizations": {"ThqWqk9A": {"description": "3iG2Xug4", "title": "iNCe4eQF"}, "95ZONnIr": {"description": "usvTfV2k", "title": "u4pqrmKa"}, "XA6UwqDr": {"description": "sp353xF2", "title": "7MeV8Kfd"}}, "name": "8VDqN76y", "start": "1976-04-26T00:00:00Z", "tierItemId": "mtoUOY9w"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateSeason \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'CreateSeason' test.out

#- 5 GetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'GetCurrentSeason' test.out

#- 6 BulkGetUserSeasonProgression
# body param: body
echo '{"userIds": ["tU76Z2n4", "7YOQ6bhT", "yP1v4h97"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op BulkGetUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 6 'BulkGetUserSeasonProgression' test.out

#- 7 GetSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '5xHXxTxc' \
    > test.out 2>&1
eval_tap $? 7 'GetSeason' test.out

#- 8 DeleteSeason
$CLI_EXE \
    --sn seasonpass \
    --op DeleteSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'bFP47Xwt' \
    > test.out 2>&1
eval_tap $? 8 'DeleteSeason' test.out

#- 9 UpdateSeason
# body param: body
echo '{"autoClaim": false, "defaultLanguage": "nIuXVJst", "defaultRequiredExp": 54, "draftStoreId": "F5MaqDd8", "end": "1993-10-30T00:00:00Z", "excessStrategy": {"currency": "GuvlcOT4", "method": "NONE", "percentPerExp": 51}, "images": [{"as": "tlNOzfjG", "caption": "nehSmbZ9", "height": 30, "imageUrl": "nA5XDPXx", "smallImageUrl": "hgQTCo57", "width": 78}, {"as": "q6DgRglh", "caption": "sUS7DSO7", "height": 91, "imageUrl": "JQG4GLf1", "smallImageUrl": "KbIPvdO7", "width": 8}, {"as": "HDMw34u7", "caption": "XpLf2YBw", "height": 17, "imageUrl": "awFSMWwF", "smallImageUrl": "HAqmmGcP", "width": 100}], "localizations": {"gGDhHMKb": {"description": "ixmDNLfc", "title": "yKPg2w3O"}, "clXwkcTE": {"description": "SxiHbKni", "title": "hlDgtNtd"}, "2lGLRuIi": {"description": "agSlDmi8", "title": "QM6bAllc"}}, "name": "k4gNfnjI", "start": "1984-04-26T00:00:00Z", "tierItemId": "6xmIwQT2"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'U0mnyTXw' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'UpdateSeason' test.out

#- 10 CloneSeason
# body param: body
echo '{"end": "1982-01-06T00:00:00Z", "name": "lc2ogY2T", "start": "1980-11-09T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CloneSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'tcNM6geC' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'CloneSeason' test.out

#- 11 GetFullSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetFullSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'mz9Xy54a' \
    > test.out 2>&1
eval_tap $? 11 'GetFullSeason' test.out

#- 12 QueryPasses
$CLI_EXE \
    --sn seasonpass \
    --op QueryPasses \
    --namespace $AB_NAMESPACE \
    --seasonId 'WqTyoOgr' \
    > test.out 2>&1
eval_tap $? 12 'QueryPasses' test.out

#- 13 CreatePass
# body param: body
echo '{"autoEnroll": false, "code": "133c7ada", "displayOrder": 24, "images": [{"as": "iF6v81IZ", "caption": "vCIwLp65", "height": 69, "imageUrl": "Z341QQYD", "smallImageUrl": "ZvIY15bw", "width": 51}, {"as": "crMH7GkC", "caption": "NtkZCPyZ", "height": 82, "imageUrl": "L4mNFMv6", "smallImageUrl": "I6WiUZLC", "width": 13}, {"as": "ryFnCtOi", "caption": "jw7uq0CV", "height": 52, "imageUrl": "WWtVgHdP", "smallImageUrl": "zWcbNJqW", "width": 35}], "localizations": {"zQQALqeL": {"description": "1vJDbZNG", "title": "QoRDNy58"}, "1tJM3Stz": {"description": "oTuCKSkA", "title": "0t2zEmTJ"}, "vEhUvmtm": {"description": "uU3mW8h2", "title": "CBdU2yI7"}}, "passItemId": "iFLhne6G"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreatePass \
    --namespace $AB_NAMESPACE \
    --seasonId 'KJxSRcji' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'CreatePass' test.out

#- 14 GetPass
$CLI_EXE \
    --sn seasonpass \
    --op GetPass \
    --code 'TJFZWNql' \
    --namespace $AB_NAMESPACE \
    --seasonId 'XfYPFuiS' \
    > test.out 2>&1
eval_tap $? 14 'GetPass' test.out

#- 15 DeletePass
$CLI_EXE \
    --sn seasonpass \
    --op DeletePass \
    --code 'ap1Vzsn1' \
    --namespace $AB_NAMESPACE \
    --seasonId 'rXAkaX1p' \
    > test.out 2>&1
eval_tap $? 15 'DeletePass' test.out

#- 16 UpdatePass
# body param: body
echo '{"autoEnroll": true, "displayOrder": 52, "images": [{"as": "6WGr0rYV", "caption": "fp7wNP83", "height": 6, "imageUrl": "G8As4uqe", "smallImageUrl": "nr0ZrDsT", "width": 89}, {"as": "RElbsfLE", "caption": "m3TnftlD", "height": 65, "imageUrl": "gm4qivqC", "smallImageUrl": "A9ocR0PC", "width": 27}, {"as": "qsppHnbE", "caption": "US0vqmWD", "height": 0, "imageUrl": "xirJY17a", "smallImageUrl": "waBOXF7w", "width": 75}], "localizations": {"5EWpMjsh": {"description": "K4dZCRv3", "title": "NjoRNCSl"}, "hWbQ1os7": {"description": "KszBx6uX", "title": "zzbH13Pt"}, "K8qZJQbB": {"description": "XEiDc9Sc", "title": "zms9U5Xg"}}, "passItemId": "I1vMF5sz"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdatePass \
    --code 'i0ZDcg6P' \
    --namespace $AB_NAMESPACE \
    --seasonId 'ZJfLr4q7' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'UpdatePass' test.out

#- 17 PublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'W3JB3zPD' \
    > test.out 2>&1
eval_tap $? 17 'PublishSeason' test.out

#- 18 RetireSeason
$CLI_EXE \
    --sn seasonpass \
    --op RetireSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'UxrUsDyi' \
    --force 'true' \
    > test.out 2>&1
eval_tap $? 18 'RetireSeason' test.out

#- 19 QueryRewards
$CLI_EXE \
    --sn seasonpass \
    --op QueryRewards \
    --namespace $AB_NAMESPACE \
    --seasonId 'g8ZIAKrS' \
    --q 'oFjq7sOl' \
    > test.out 2>&1
eval_tap $? 19 'QueryRewards' test.out

#- 20 CreateReward
# body param: body
echo '{"code": "ZXX2780W", "currency": {"currencyCode": "X1MPf8qn", "namespace": "IsntREvQ"}, "image": {"as": "O9AAvghZ", "caption": "2RUxWRtT", "height": 17, "imageUrl": "pscPAsYa", "smallImageUrl": "zRoctdGN", "width": 57}, "itemId": "JmYfUmpT", "quantity": 99, "type": "CURRENCY"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateReward \
    --namespace $AB_NAMESPACE \
    --seasonId 'Y0JfvgKU' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 20 'CreateReward' test.out

#- 21 GetReward
$CLI_EXE \
    --sn seasonpass \
    --op GetReward \
    --code 'MntEEZpK' \
    --namespace $AB_NAMESPACE \
    --seasonId 'KVI0QrXd' \
    > test.out 2>&1
eval_tap $? 21 'GetReward' test.out

#- 22 DeleteReward
$CLI_EXE \
    --sn seasonpass \
    --op DeleteReward \
    --code 'Lq7IIc9C' \
    --namespace $AB_NAMESPACE \
    --seasonId 'TY2f9iDm' \
    > test.out 2>&1
eval_tap $? 22 'DeleteReward' test.out

#- 23 UpdateReward
# body param: body
echo '{"currency": {"currencyCode": "VVxYDycf", "namespace": "E2yFzmQ4"}, "image": {"as": "KWC0mGHI", "caption": "I1j7di6E", "height": 55, "imageUrl": "38HXiNUi", "smallImageUrl": "mMZO3S9l", "width": 27}, "itemId": "9LPXqbw6", "nullFields": ["UmodoP8u", "oerUpObT", "uYMWxNMO"], "quantity": 90, "type": "ITEM"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateReward \
    --code 'dQoSAHaf' \
    --namespace $AB_NAMESPACE \
    --seasonId 'ZmgItVDI' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'UpdateReward' test.out

#- 24 QueryTiers
$CLI_EXE \
    --sn seasonpass \
    --op QueryTiers \
    --namespace $AB_NAMESPACE \
    --seasonId 'a4jhwFk8' \
    --limit '41' \
    --offset '41' \
    > test.out 2>&1
eval_tap $? 24 'QueryTiers' test.out

#- 25 CreateTier
# body param: body
echo '{"index": 64, "quantity": 1, "tier": {"requiredExp": 49, "rewards": {"b2GlwBeS": ["VVd9efzb", "lCIVo4et", "nEi1PEw2"], "Cbu6nUKS": ["bAsCNFRG", "PEt8G2Ul", "hErOPb5U"], "0fE1qMeS": ["wGHHPAfo", "NHiIBo74", "VO6ICz6r"]}}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateTier \
    --namespace $AB_NAMESPACE \
    --seasonId 'wkxIm9uW' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'CreateTier' test.out

#- 26 UpdateTier
# body param: body
echo '{"requiredExp": 32, "rewards": {"6w7PQ5G8": ["LhXUMwAw", "pAgTNbNA", "sSyu56OJ"], "lZus6YRC": ["tRjHSsrQ", "f4aZ5zsC", "YbdkOjPk"], "QjSeLdEC": ["UrkJNe5C", "HYhwbAHd", "g3eXdUav"]}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateTier \
    --id 'ODLvEtTY' \
    --namespace $AB_NAMESPACE \
    --seasonId 'fKYjv9xR' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'UpdateTier' test.out

#- 27 DeleteTier
$CLI_EXE \
    --sn seasonpass \
    --op DeleteTier \
    --id 'vk4qP5WM' \
    --namespace $AB_NAMESPACE \
    --seasonId 'vpQfU2ip' \
    > test.out 2>&1
eval_tap $? 27 'DeleteTier' test.out

#- 28 ReorderTier
# body param: body
echo '{"newIndex": 84}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op ReorderTier \
    --id 'Kt1vpWwy' \
    --namespace $AB_NAMESPACE \
    --seasonId 'qJ7PDQvV' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 28 'ReorderTier' test.out

#- 29 UnpublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op UnpublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'wjB1Te5E' \
    --force 'true' \
    > test.out 2>&1
eval_tap $? 29 'UnpublishSeason' test.out

#- 30 GetUserParticipatedSeasons
$CLI_EXE \
    --sn seasonpass \
    --op GetUserParticipatedSeasons \
    --namespace $AB_NAMESPACE \
    --userId '7jkX7Ioy' \
    --limit '24' \
    --offset '29' \
    > test.out 2>&1
eval_tap $? 30 'GetUserParticipatedSeasons' test.out

#- 31 GrantUserExp
# body param: body
echo '{"exp": 91, "source": "SWEAT", "tags": ["GyvKDiNh", "tliDFByb", "EuAyngMt"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserExp \
    --namespace $AB_NAMESPACE \
    --userId 'gYAIS4OT' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 31 'GrantUserExp' test.out

#- 32 GrantUserPass
# body param: body
echo '{"passCode": "YIMykzln", "passItemId": "zjVt7P6K"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserPass \
    --namespace $AB_NAMESPACE \
    --userId 'y7bRsMaq' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 32 'GrantUserPass' test.out

#- 33 ExistsAnyPassByPassCodes
$CLI_EXE \
    --sn seasonpass \
    --op ExistsAnyPassByPassCodes \
    --namespace $AB_NAMESPACE \
    --userId 'dt0FyCXD' \
    --passCodes '["4czCyTT2", "Ob9ObWjX", "C8mKLxMP"]' \
    > test.out 2>&1
eval_tap $? 33 'ExistsAnyPassByPassCodes' test.out

#- 34 GetCurrentUserSeasonProgression
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --userId 'YL9HPN7H' \
    > test.out 2>&1
eval_tap $? 34 'GetCurrentUserSeasonProgression' test.out

#- 35 CheckSeasonPurchasable
# body param: body
echo '{"passItemId": "hpgTUtF6", "tierItemCount": 97, "tierItemId": "ceYZyveo"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CheckSeasonPurchasable \
    --namespace $AB_NAMESPACE \
    --userId 'vuUHp4nJ' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 35 'CheckSeasonPurchasable' test.out

#- 36 ResetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op ResetUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'Y5jR9EwE' \
    > test.out 2>&1
eval_tap $? 36 'ResetUserSeason' test.out

#- 37 GrantUserTier
# body param: body
echo '{"count": 11, "source": "SWEAT", "tags": ["h1pTBojh", "XoWgtIPX", "hgM6ZsuV"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserTier \
    --namespace $AB_NAMESPACE \
    --userId 'nRl7C525' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 37 'GrantUserTier' test.out

#- 38 QueryUserExpGrantHistory
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistory \
    --namespace $AB_NAMESPACE \
    --userId 'xZQs1zEG' \
    --from '4Lr3L5Cg' \
    --limit '80' \
    --offset '96' \
    --seasonId '3DcSAJiY' \
    --source 'SWEAT' \
    --tags '["Y2ypolqh", "MhbQRmrs", "RuyJIcKO"]' \
    --to 'lk8Hzcdt' \
    > test.out 2>&1
eval_tap $? 38 'QueryUserExpGrantHistory' test.out

#- 39 QueryUserExpGrantHistoryTag
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistoryTag \
    --namespace $AB_NAMESPACE \
    --userId '95Mp5Omo' \
    --seasonId '4DdhYutz' \
    > test.out 2>&1
eval_tap $? 39 'QueryUserExpGrantHistoryTag' test.out

#- 40 GetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '46mzCkgX' \
    --userId 'hK6Pbyx5' \
    > test.out 2>&1
eval_tap $? 40 'GetUserSeason' test.out

#- 41 PublicGetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentSeason \
    --namespace $AB_NAMESPACE \
    --language 'aMYl7lsd' \
    > test.out 2>&1
eval_tap $? 41 'PublicGetCurrentSeason' test.out

#- 42 PublicGetCurrentUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'Lur3JBxq' \
    > test.out 2>&1
eval_tap $? 42 'PublicGetCurrentUserSeason' test.out

#- 43 PublicClaimUserReward
# body param: body
echo '{"passCode": "1Y5Zj3ua", "rewardCode": "2XCizwEA", "tierIndex": 92}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op PublicClaimUserReward \
    --namespace $AB_NAMESPACE \
    --userId 'XSgn45js' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 43 'PublicClaimUserReward' test.out

#- 44 PublicBulkClaimUserRewards
$CLI_EXE \
    --sn seasonpass \
    --op PublicBulkClaimUserRewards \
    --namespace $AB_NAMESPACE \
    --userId 'SQMc3L4W' \
    > test.out 2>&1
eval_tap $? 44 'PublicBulkClaimUserRewards' test.out

#- 45 PublicGetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'QXl3PRX8' \
    --userId 'gKSvWF2L' \
    > test.out 2>&1
eval_tap $? 45 'PublicGetUserSeason' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE