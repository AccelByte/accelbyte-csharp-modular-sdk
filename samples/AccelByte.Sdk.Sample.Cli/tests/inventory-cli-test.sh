#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 
# - template file: 

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..34"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 AdminListInventories
$CLI_EXE \
    --sn inventory \
    --op AdminListInventories \
    --namespace $AB_NAMESPACE \
    --inventoryConfigurationCode 'fLrq4WGW' \
    --limit '32' \
    --offset '100' \
    --sortBy 'createdAt:asc' \
    --userId 'l98qXfXo' \
    > test.out 2>&1
eval_tap $? 2 'AdminListInventories' test.out

#- 3 AdminCreateInventory
# body param: body
echo '{"inventoryConfigurationCode": "3qPRvAtc", "userId": "0nSzFdPs"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateInventory \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'AdminCreateInventory' test.out

#- 4 AdminGetInventory
$CLI_EXE \
    --sn inventory \
    --op AdminGetInventory \
    --inventoryId 'kmasRpYG' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 4 'AdminGetInventory' test.out

#- 5 AdminUpdateInventory
# body param: body
echo '{"incMaxSlots": 61}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminUpdateInventory \
    --inventoryId 'Q79RZRy2' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'AdminUpdateInventory' test.out

#- 6 DeleteInventory
# body param: body
echo '{"message": "9IspJ5aZ"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op DeleteInventory \
    --inventoryId '6S8FmP0D' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 6 'DeleteInventory' test.out

#- 7 AdminListItems
$CLI_EXE \
    --sn inventory \
    --op AdminListItems \
    --inventoryId 'CMXZR4tJ' \
    --namespace $AB_NAMESPACE \
    --limit '77' \
    --offset '57' \
    --qtyGte '41' \
    --sortBy 'updatedAt:asc' \
    --sourceItemId 'yAmtpydV' \
    --tags 'WhFyR5qo' \
    > test.out 2>&1
eval_tap $? 7 'AdminListItems' test.out

#- 8 AdminGetInventoryItem
$CLI_EXE \
    --sn inventory \
    --op AdminGetInventoryItem \
    --inventoryId '7YoyUw2C' \
    --namespace $AB_NAMESPACE \
    --slotId 'Q7JajBxY' \
    --sourceItemId 'utujQ1Vj' \
    > test.out 2>&1
eval_tap $? 8 'AdminGetInventoryItem' test.out

#- 9 AdminListInventoryConfigurations
$CLI_EXE \
    --sn inventory \
    --op AdminListInventoryConfigurations \
    --namespace $AB_NAMESPACE \
    --code '30CW6QLX' \
    --limit '96' \
    --offset '63' \
    --sortBy 'createdAt:desc' \
    > test.out 2>&1
eval_tap $? 9 'AdminListInventoryConfigurations' test.out

#- 10 AdminCreateInventoryConfiguration
# body param: body
echo '{"code": "TtPefOi6", "description": "Jz6ECzi6", "initialMaxSlots": 25, "maxInstancesPerUser": 54, "maxUpgradeSlots": 87, "name": "gWvssjJH"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateInventoryConfiguration \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'AdminCreateInventoryConfiguration' test.out

#- 11 AdminGetInventoryConfiguration
$CLI_EXE \
    --sn inventory \
    --op AdminGetInventoryConfiguration \
    --inventoryConfigurationId 'E0TZsqoM' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 11 'AdminGetInventoryConfiguration' test.out

#- 12 AdminUpdateInventoryConfiguration
# body param: body
echo '{"code": "qDUFNfIX", "description": "9jQMuygc", "initialMaxSlots": 99, "maxInstancesPerUser": 87, "maxUpgradeSlots": 38, "name": "9A8OsgeL"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminUpdateInventoryConfiguration \
    --inventoryConfigurationId 'RXQ8vR8h' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'AdminUpdateInventoryConfiguration' test.out

#- 13 AdminDeleteInventoryConfiguration
$CLI_EXE \
    --sn inventory \
    --op AdminDeleteInventoryConfiguration \
    --inventoryConfigurationId 'O5Hketbd' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 13 'AdminDeleteInventoryConfiguration' test.out

#- 14 AdminListItemTypes
$CLI_EXE \
    --sn inventory \
    --op AdminListItemTypes \
    --namespace $AB_NAMESPACE \
    --limit '26' \
    --offset '84' \
    --sortBy 'createdAt:asc' \
    > test.out 2>&1
eval_tap $? 14 'AdminListItemTypes' test.out

#- 15 AdminCreateItemType
# body param: body
echo '{"name": "7MnBDQNq"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateItemType \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 15 'AdminCreateItemType' test.out

#- 16 AdminDeleteItemType
$CLI_EXE \
    --sn inventory \
    --op AdminDeleteItemType \
    --itemTypeName 'x9RDk7xs' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 16 'AdminDeleteItemType' test.out

#- 17 AdminListTags
$CLI_EXE \
    --sn inventory \
    --op AdminListTags \
    --namespace $AB_NAMESPACE \
    --limit '8' \
    --offset '37' \
    --owner 'OBaLOYcn' \
    --sortBy 'name:asc' \
    > test.out 2>&1
eval_tap $? 17 'AdminListTags' test.out

#- 18 AdminCreateTag
# body param: body
echo '{"name": "LFNAXfwB", "owner": "SERVER"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateTag \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'AdminCreateTag' test.out

#- 19 AdminDeleteTag
$CLI_EXE \
    --sn inventory \
    --op AdminDeleteTag \
    --namespace $AB_NAMESPACE \
    --tagName 'WZAbGksO' \
    > test.out 2>&1
eval_tap $? 19 'AdminDeleteTag' test.out

#- 20 AdminConsumeUserItem
# body param: body
echo '{"qty": 30, "slotId": "jn4KwnQY", "sourceItemId": "0zXWXNNz"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminConsumeUserItem \
    --inventoryId '4O6o532f' \
    --namespace $AB_NAMESPACE \
    --userId '3tXEzCfF' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 20 'AdminConsumeUserItem' test.out

#- 21 AdminBulkUpdateMyItems
# body param: body
echo '[{"customAttributes": {"VrBluyCa": {}, "HDWr0dQr": {}, "Ynvxq5mj": {}}, "serverCustomAttributes": {"SQSrNt6A": {}, "QgmviZxE": {}, "ueRqwWjJ": {}}, "slotId": "EcVLZM57", "sourceItemId": "U81gbuOt", "tags": ["zOjCU64G", "i2ImKngm", "WxGplhMX"], "type": "LHpD9H6v"}, {"customAttributes": {"JieHcxxo": {}, "rMN62cEX": {}, "hdiVYuzm": {}}, "serverCustomAttributes": {"E5cgWiJX": {}, "Vr0OoXkC": {}, "au5Ndp7k": {}}, "slotId": "2bVxqrZx", "sourceItemId": "vNb4SnzM", "tags": ["M36MA1Za", "5KAixAtD", "qRQ1GtCZ"], "type": "uwsLf1pQ"}, {"customAttributes": {"eh1GOwcv": {}, "kzKZLdGU": {}, "PuUfnFn2": {}}, "serverCustomAttributes": {"Ec4tK3F1": {}, "MvRKIUu2": {}, "sEGFqYPi": {}}, "slotId": "UX6ikMdk", "sourceItemId": "fiTFvyxb", "tags": ["p82UshUf", "M3vG6o28", "HD4cZ11o"], "type": "paNFVtDe"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminBulkUpdateMyItems \
    --inventoryId '3Aqlwzmz' \
    --namespace $AB_NAMESPACE \
    --userId 'BptJgMWP' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AdminBulkUpdateMyItems' test.out

#- 22 AdminSaveItemToInventory
# body param: body
echo '{"customAttributes": {"HDG3QwKP": {}, "tN5mmEbT": {}, "wp78fP8E": {}}, "qty": 34, "serverCustomAttributes": {"I91QRbF9": {}, "bMqQJdsF": {}, "YnfqhsJa": {}}, "slotId": "CdUwqVTv", "slotUsed": 55, "sourceItemId": "GS6MpzrJ", "tags": ["azpRIe8R", "vA027fUo", "1mit67sX"], "type": "u2ODLxYs"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminSaveItemToInventory \
    --inventoryId 'J533M2Zq' \
    --namespace $AB_NAMESPACE \
    --userId '8eK34DuR' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 22 'AdminSaveItemToInventory' test.out

#- 23 AdminBulkRemoveItems
# body param: body
echo '[{"slotId": "puByctFG", "sourceItemId": "syJXB8To"}, {"slotId": "QQ4wJ1o1", "sourceItemId": "OnF6yHBd"}, {"slotId": "SSHf9pTt", "sourceItemId": "cpi5mfQK"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminBulkRemoveItems \
    --inventoryId 'CXeLpGto' \
    --namespace $AB_NAMESPACE \
    --userId 'dsMz4ctg' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'AdminBulkRemoveItems' test.out

#- 24 AdminSaveItem
# body param: body
echo '{"customAttributes": {"UUP6iRyL": {}, "YVFdhQHC": {}, "UVJdqJjb": {}}, "inventoryConfigurationCode": "7GgxWjyM", "qty": 13, "serverCustomAttributes": {"kD6ZTXch": {}, "9veyQVAe": {}, "re2uWQWp": {}}, "slotId": "kBJTwGpW", "slotUsed": 48, "sourceItemId": "gfif5iV6", "tags": ["7lyM2MwQ", "m014Apxg", "71kpFvU3"], "type": "SxSHKz3r"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminSaveItem \
    --namespace $AB_NAMESPACE \
    --userId 'y1BMfEtK' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 24 'AdminSaveItem' test.out

#- 25 PublicListInventoryConfigurations
$CLI_EXE \
    --sn inventory \
    --op PublicListInventoryConfigurations \
    --namespace $AB_NAMESPACE \
    --code '55mKkunp' \
    --limit '46' \
    --offset '68' \
    --sortBy 'updatedAt' \
    > test.out 2>&1
eval_tap $? 25 'PublicListInventoryConfigurations' test.out

#- 26 PublicListItemTypes
$CLI_EXE \
    --sn inventory \
    --op PublicListItemTypes \
    --namespace $AB_NAMESPACE \
    --limit '24' \
    --offset '54' \
    --sortBy 'name' \
    > test.out 2>&1
eval_tap $? 26 'PublicListItemTypes' test.out

#- 27 PublicListTags
$CLI_EXE \
    --sn inventory \
    --op PublicListTags \
    --namespace $AB_NAMESPACE \
    --limit '75' \
    --offset '7' \
    --sortBy 'createdAt' \
    > test.out 2>&1
eval_tap $? 27 'PublicListTags' test.out

#- 28 PublicListInventories
$CLI_EXE \
    --sn inventory \
    --op PublicListInventories \
    --namespace $AB_NAMESPACE \
    --inventoryConfigurationCode 'kAUsSZC1' \
    --limit '34' \
    --offset '45' \
    --sortBy 'createdAt:desc' \
    > test.out 2>&1
eval_tap $? 28 'PublicListInventories' test.out

#- 29 PublicConsumeMyItem
# body param: body
echo '{"qty": 19, "slotId": "xeAEAN2m", "sourceItemId": "hd3ldYjt"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicConsumeMyItem \
    --inventoryId 'eV8co56Y' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicConsumeMyItem' test.out

#- 30 PublicListItems
$CLI_EXE \
    --sn inventory \
    --op PublicListItems \
    --inventoryId 't6cQ8TRe' \
    --namespace $AB_NAMESPACE \
    --limit '0' \
    --offset '25' \
    --qtyGte '78' \
    --sortBy 'createdAt' \
    --sourceItemId 'gg2D3dIT' \
    --tags 'G91hyuls' \
    > test.out 2>&1
eval_tap $? 30 'PublicListItems' test.out

#- 31 PublicBulkUpdateMyItems
# body param: body
echo '[{"customAttributes": {"EX6T52ee": {}, "8uVVcdc7": {}, "Cs8x82i9": {}}, "slotId": "GwDqyqQJ", "sourceItemId": "hTN6rpnG", "tags": ["W16t2LD7", "GF2LsZTW", "2nouAN1H"]}, {"customAttributes": {"tBSnwOsW": {}, "3OYGyumV": {}, "NcGZgq9q": {}}, "slotId": "YRTSYcxq", "sourceItemId": "4N8038MI", "tags": ["KTeHQRk4", "CnjWwn9A", "6siiive6"]}, {"customAttributes": {"EUGl98RP": {}, "WnqCi7lx": {}, "s8uNHlJV": {}}, "slotId": "xQNZLJaw", "sourceItemId": "UTIcImft", "tags": ["YYcndySQ", "4MsuSNiP", "7OPEvkZD"]}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicBulkUpdateMyItems \
    --inventoryId 'SH2d3FrC' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 31 'PublicBulkUpdateMyItems' test.out

#- 32 PublicBulkRemoveMyItems
# body param: body
echo '[{"slotId": "e4v04RPq", "sourceItemId": "DTCIcwAc"}, {"slotId": "azAfbofq", "sourceItemId": "7AmOdtZ8"}, {"slotId": "nthqINnM", "sourceItemId": "gbOA3iH5"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicBulkRemoveMyItems \
    --inventoryId 'LpL62tyY' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 32 'PublicBulkRemoveMyItems' test.out

#- 33 PublicMoveMyItems
# body param: body
echo '{"items": [{"qty": 33, "slotId": "sNO9ycjx", "sourceItemId": "JYPAX6Yk"}, {"qty": 52, "slotId": "5kDon8eB", "sourceItemId": "fPQgaFuQ"}, {"qty": 29, "slotId": "5FLTP4dj", "sourceItemId": "l7WLu5Yr"}], "srcInventoryId": "YSfRyZpX"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicMoveMyItems \
    --inventoryId 'uQaF27rq' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 33 'PublicMoveMyItems' test.out

#- 34 PublicGetItem
$CLI_EXE \
    --sn inventory \
    --op PublicGetItem \
    --inventoryId 'Olk5nvDO' \
    --namespace $AB_NAMESPACE \
    --slotId 'RUXbotWl' \
    --sourceItemId 'sgtqT8t6' \
    > test.out 2>&1
eval_tap $? 34 'PublicGetItem' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE