#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 
# - template file: 

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..34"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 AdminListInventories
$CLI_EXE \
    --sn inventory \
    --op AdminListInventories \
    --namespace $AB_NAMESPACE \
    --inventoryConfigurationCode 'Wx7wqSEq' \
    --limit '84' \
    --offset '65' \
    --sortBy 'createdAt:asc' \
    --userId 'zU45ueSI' \
    > test.out 2>&1
eval_tap $? 2 'AdminListInventories' test.out

#- 3 AdminCreateInventory
# body param: body
echo '{"inventoryConfigurationCode": "ZUpVIMtG", "userId": "XKpc7Sc5"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateInventory \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'AdminCreateInventory' test.out

#- 4 AdminGetInventory
$CLI_EXE \
    --sn inventory \
    --op AdminGetInventory \
    --inventoryId '8priVqBF' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 4 'AdminGetInventory' test.out

#- 5 AdminUpdateInventory
# body param: body
echo '{"incMaxSlots": 62}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminUpdateInventory \
    --inventoryId '1VNOZIGp' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'AdminUpdateInventory' test.out

#- 6 DeleteInventory
# body param: body
echo '{"message": "Vgjcp4HT"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op DeleteInventory \
    --inventoryId 'fcmBVZqB' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 6 'DeleteInventory' test.out

#- 7 AdminListItems
$CLI_EXE \
    --sn inventory \
    --op AdminListItems \
    --inventoryId 'PAdB4Wxc' \
    --namespace $AB_NAMESPACE \
    --limit '42' \
    --offset '32' \
    --qtyGte '3' \
    --sortBy 'updatedAt' \
    --sourceItemId 'JfRNeNMn' \
    --tags 'd8bQoXF2' \
    > test.out 2>&1
eval_tap $? 7 'AdminListItems' test.out

#- 8 AdminGetInventoryItem
$CLI_EXE \
    --sn inventory \
    --op AdminGetInventoryItem \
    --inventoryId '0FqOQIHU' \
    --namespace $AB_NAMESPACE \
    --slotId 'UsMVKd3I' \
    --sourceItemId 'jHzj7wuy' \
    > test.out 2>&1
eval_tap $? 8 'AdminGetInventoryItem' test.out

#- 9 AdminListInventoryConfigurations
$CLI_EXE \
    --sn inventory \
    --op AdminListInventoryConfigurations \
    --namespace $AB_NAMESPACE \
    --code 'bjKIdGxp' \
    --limit '7' \
    --offset '58' \
    --sortBy 'createdAt' \
    > test.out 2>&1
eval_tap $? 9 'AdminListInventoryConfigurations' test.out

#- 10 AdminCreateInventoryConfiguration
# body param: body
echo '{"code": "AeN3DOeh", "description": "ftTMxVdA", "initialMaxSlots": 96, "maxInstancesPerUser": 49, "maxUpgradeSlots": 61, "name": "onZghRzx"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateInventoryConfiguration \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'AdminCreateInventoryConfiguration' test.out

#- 11 AdminGetInventoryConfiguration
$CLI_EXE \
    --sn inventory \
    --op AdminGetInventoryConfiguration \
    --inventoryConfigurationId 'ZysjQbPi' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 11 'AdminGetInventoryConfiguration' test.out

#- 12 AdminUpdateInventoryConfiguration
# body param: body
echo '{"code": "E2pflmlp", "description": "u0UO7DXZ", "initialMaxSlots": 87, "maxInstancesPerUser": 45, "maxUpgradeSlots": 14, "name": "6ZF3RsLu"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminUpdateInventoryConfiguration \
    --inventoryConfigurationId 'YrktBjfF' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'AdminUpdateInventoryConfiguration' test.out

#- 13 AdminDeleteInventoryConfiguration
$CLI_EXE \
    --sn inventory \
    --op AdminDeleteInventoryConfiguration \
    --inventoryConfigurationId 'UEw6m4eY' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 13 'AdminDeleteInventoryConfiguration' test.out

#- 14 AdminListItemTypes
$CLI_EXE \
    --sn inventory \
    --op AdminListItemTypes \
    --namespace $AB_NAMESPACE \
    --limit '59' \
    --offset '44' \
    --sortBy 'name' \
    > test.out 2>&1
eval_tap $? 14 'AdminListItemTypes' test.out

#- 15 AdminCreateItemType
# body param: body
echo '{"name": "pp6Y027n"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateItemType \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 15 'AdminCreateItemType' test.out

#- 16 AdminDeleteItemType
$CLI_EXE \
    --sn inventory \
    --op AdminDeleteItemType \
    --itemTypeName 'oEbS7YOR' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 16 'AdminDeleteItemType' test.out

#- 17 AdminListTags
$CLI_EXE \
    --sn inventory \
    --op AdminListTags \
    --namespace $AB_NAMESPACE \
    --limit '29' \
    --offset '0' \
    --owner 'dA3C80Ye' \
    --sortBy 'name:asc' \
    > test.out 2>&1
eval_tap $? 17 'AdminListTags' test.out

#- 18 AdminCreateTag
# body param: body
echo '{"name": "vk08Xi9c", "owner": "SERVER"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateTag \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'AdminCreateTag' test.out

#- 19 AdminDeleteTag
$CLI_EXE \
    --sn inventory \
    --op AdminDeleteTag \
    --namespace $AB_NAMESPACE \
    --tagName '48x2Mpa1' \
    > test.out 2>&1
eval_tap $? 19 'AdminDeleteTag' test.out

#- 20 AdminConsumeUserItem
# body param: body
echo '{"qty": 51, "slotId": "MDhmetcr", "sourceItemId": "l0WV45A2"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminConsumeUserItem \
    --inventoryId 'GHkytCr2' \
    --namespace $AB_NAMESPACE \
    --userId 'ITiMQPZe' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 20 'AdminConsumeUserItem' test.out

#- 21 AdminBulkUpdateMyItems
# body param: body
echo '[{"customAttributes": {"HWv4RNlH": {}, "JpElgrKZ": {}, "h60UYXyE": {}}, "serverCustomAttributes": {"LpzWirBj": {}, "f8eIBeh3": {}, "A4UqwzaD": {}}, "slotId": "kPFWVX6U", "sourceItemId": "4fMJFvj1", "tags": ["lbQDhq4C", "5aJmGfU4", "X1AU5Ec2"], "type": "brcyeGh4"}, {"customAttributes": {"z22xIFWe": {}, "BaOqWA5X": {}, "uRFLOVj5": {}}, "serverCustomAttributes": {"XuQg0JGu": {}, "02EGbS5Z": {}, "8HU5Nji5": {}}, "slotId": "ZeYLqIzE", "sourceItemId": "B4CLWg16", "tags": ["HoNLXkWx", "5PrbkvY9", "OW8A69zO"], "type": "pNSwqbqh"}, {"customAttributes": {"rqZOzyh2": {}, "ZTNVzS6k": {}, "e5WR472o": {}}, "serverCustomAttributes": {"OTCkWKHn": {}, "8ovI83qj": {}, "XkZo1GAP": {}}, "slotId": "a6SRDRTf", "sourceItemId": "jJpcLMHB", "tags": ["pk0IFeB5", "nMmYU4Fs", "fYHQMobd"], "type": "OaJbW5KG"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminBulkUpdateMyItems \
    --inventoryId 'ySz2GGfr' \
    --namespace $AB_NAMESPACE \
    --userId 'Vhpr2ToL' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AdminBulkUpdateMyItems' test.out

#- 22 AdminSaveItemToInventory
# body param: body
echo '{"customAttributes": {"iVOKGQQK": {}, "9tj5cUoB": {}, "wp6ndsMk": {}}, "qty": 43, "serverCustomAttributes": {"DkcQgSg9": {}, "PdO3GeZE": {}, "agImuXj9": {}}, "slotId": "9lRbMdTT", "slotUsed": 85, "sourceItemId": "V2CLv2s6", "tags": ["OFawlCe2", "UAXL8WI6", "pCzmQNJD"], "type": "hR4axyh1"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminSaveItemToInventory \
    --inventoryId 'Vd9P3REa' \
    --namespace $AB_NAMESPACE \
    --userId 'v01JpobA' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 22 'AdminSaveItemToInventory' test.out

#- 23 AdminBulkRemoveItems
# body param: body
echo '[{"slotId": "Ict0gMyp", "sourceItemId": "a2XOH00m"}, {"slotId": "ggMmtJI5", "sourceItemId": "pwsoa0nc"}, {"slotId": "jDG3HPwU", "sourceItemId": "MTnO24fd"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminBulkRemoveItems \
    --inventoryId 'bgjIsZKj' \
    --namespace $AB_NAMESPACE \
    --userId '4pAZ6CW7' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'AdminBulkRemoveItems' test.out

#- 24 AdminSaveItem
# body param: body
echo '{"customAttributes": {"0LJRakWg": {}, "TN1hTJ3K": {}, "f8JgFxFb": {}}, "inventoryConfigurationCode": "wkDo2qGA", "qty": 70, "serverCustomAttributes": {"BVbX70s6": {}, "TURjifve": {}, "aYEeQsC0": {}}, "slotId": "ZbuTiMdD", "slotUsed": 95, "sourceItemId": "0xnwIGvd", "tags": ["QwyUOlUR", "VQrjqykU", "Xz5QfszT"], "type": "REnfcymL"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminSaveItem \
    --namespace $AB_NAMESPACE \
    --userId 'ZOs1uBVU' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 24 'AdminSaveItem' test.out

#- 25 PublicListInventoryConfigurations
$CLI_EXE \
    --sn inventory \
    --op PublicListInventoryConfigurations \
    --namespace $AB_NAMESPACE \
    --code '5SdQWdGl' \
    --limit '53' \
    --offset '79' \
    --sortBy 'createdAt:asc' \
    > test.out 2>&1
eval_tap $? 25 'PublicListInventoryConfigurations' test.out

#- 26 PublicListItemTypes
$CLI_EXE \
    --sn inventory \
    --op PublicListItemTypes \
    --namespace $AB_NAMESPACE \
    --limit '28' \
    --offset '72' \
    --sortBy 'name:desc' \
    > test.out 2>&1
eval_tap $? 26 'PublicListItemTypes' test.out

#- 27 PublicListTags
$CLI_EXE \
    --sn inventory \
    --op PublicListTags \
    --namespace $AB_NAMESPACE \
    --limit '7' \
    --offset '41' \
    --sortBy 'createdAt:desc' \
    > test.out 2>&1
eval_tap $? 27 'PublicListTags' test.out

#- 28 PublicListInventories
$CLI_EXE \
    --sn inventory \
    --op PublicListInventories \
    --namespace $AB_NAMESPACE \
    --inventoryConfigurationCode '1ILqqFks' \
    --limit '6' \
    --offset '76' \
    --sortBy 'createdAt:desc' \
    > test.out 2>&1
eval_tap $? 28 'PublicListInventories' test.out

#- 29 PublicConsumeMyItem
# body param: body
echo '{"qty": 36, "slotId": "61sIxlUM", "sourceItemId": "BmAlyamz"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicConsumeMyItem \
    --inventoryId '22jYx3nJ' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicConsumeMyItem' test.out

#- 30 PublicListItems
$CLI_EXE \
    --sn inventory \
    --op PublicListItems \
    --inventoryId 'l0jfSzoZ' \
    --namespace $AB_NAMESPACE \
    --limit '65' \
    --offset '38' \
    --qtyGte '15' \
    --sortBy 'updatedAt:desc' \
    --sourceItemId 'S4rCcL3z' \
    --tags 'jO5AY39f' \
    > test.out 2>&1
eval_tap $? 30 'PublicListItems' test.out

#- 31 PublicBulkUpdateMyItems
# body param: body
echo '[{"customAttributes": {"LSCpuDf0": {}, "4YgtlbhH": {}, "8bB8ENPj": {}}, "slotId": "Tt3qbz99", "sourceItemId": "F1aU7Byq", "tags": ["k9Y3KHKe", "6PU3v1EQ", "BASU3tcK"]}, {"customAttributes": {"U93AKp9v": {}, "2JpJjG2T": {}, "BDqnt0ci": {}}, "slotId": "xJrjyJxL", "sourceItemId": "LZltIueK", "tags": ["5nNWUDpS", "X0AzVlY6", "M4GoEK0e"]}, {"customAttributes": {"BhbV0Zin": {}, "U9kld8Iu": {}, "DQfPURFa": {}}, "slotId": "9FIj2blP", "sourceItemId": "FXN7osoU", "tags": ["0KajYneW", "IgKrQNAQ", "B3gpNxLl"]}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicBulkUpdateMyItems \
    --inventoryId '05EZI1ox' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 31 'PublicBulkUpdateMyItems' test.out

#- 32 PublicBulkRemoveMyItems
# body param: body
echo '[{"slotId": "HDJt1Yce", "sourceItemId": "a2FA44vk"}, {"slotId": "EaW56yju", "sourceItemId": "3M9Zy5TC"}, {"slotId": "C4BIfqT6", "sourceItemId": "HthpTUV2"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicBulkRemoveMyItems \
    --inventoryId 'PRT9tPRY' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 32 'PublicBulkRemoveMyItems' test.out

#- 33 PublicMoveMyItems
# body param: body
echo '{"items": [{"qty": 55, "slotId": "kEpD4s40", "sourceItemId": "RRO7eJe2"}, {"qty": 57, "slotId": "GUDHVguZ", "sourceItemId": "YMSd8c11"}, {"qty": 23, "slotId": "vFwOrW7f", "sourceItemId": "u7RDUKQe"}], "srcInventoryId": "E29x1hOx"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicMoveMyItems \
    --inventoryId '1lgOV3ox' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 33 'PublicMoveMyItems' test.out

#- 34 PublicGetItem
$CLI_EXE \
    --sn inventory \
    --op PublicGetItem \
    --inventoryId '9MSdcuYS' \
    --namespace $AB_NAMESPACE \
    --slotId 'n2DV1KrJ' \
    --sourceItemId 'h9DH4igz' \
    > test.out 2>&1
eval_tap $? 34 'PublicGetItem' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE